<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>color | Hannah Weller</title>
    <link>/category/color/</link>
      <atom:link href="/category/color/index.xml" rel="self" type="application/rss+xml" />
    <description>color</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><lastBuildDate>Tue, 13 Apr 2021 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/media/icon_hu894dd0f75b84cd2ded4b9885934a1072_25364_512x512_fill_lanczos_center_2.png</url>
      <title>color</title>
      <link>/category/color/</link>
    </image>
    
    <item>
      <title>Modifying pixel plots</title>
      <link>/post/modifying-pixel-plots/</link>
      <pubDate>Tue, 13 Apr 2021 00:00:00 +0000</pubDate>
      <guid>/post/modifying-pixel-plots/</guid>
      <description>&lt;script src=&#34;/post/modifying-pixel-plots/index_files/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/plotly-binding/plotly.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/typedarray/typedarray.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/jquery/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/modifying-pixel-plots/index_files/crosstalk/css/crosstalk.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/crosstalk/js/crosstalk.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/modifying-pixel-plots/index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/plotly-main/plotly-latest.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/plotly-binding/plotly.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/typedarray/typedarray.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/jquery/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/modifying-pixel-plots/index_files/crosstalk/css/crosstalk.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/crosstalk/js/crosstalk.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/modifying-pixel-plots/index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/plotly-main/plotly-latest.min.js&#34;&gt;&lt;/script&gt;
&lt;p&gt;The &lt;code&gt;plotPixels&lt;/code&gt; function in &lt;code&gt;colordistance&lt;/code&gt; is pretty inflexible. It was originally meant as a diagnostic tool, and the plots it produces are not exactly beautiful:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(colordistance)

# image from the &#39;recolorize&#39; package (github.com/hiweller/recolorize)
img &amp;lt;- system.file(&amp;quot;extdata/fulgidissima.png&amp;quot;, package = &amp;quot;recolorize&amp;quot;)

# load the image:
loaded_img &amp;lt;- loadImage(img)

# set the plot layout for opposing pixel plots
layout(matrix(1:3, nrow = 1), widths = c(0.46, 0.08, 0.46))

# plot the pixels in RGB color space from two angles:
plotPixels(loaded_img)

# plot the original image
par(mar = rep(0, 4)) # no margin
plotImage(loaded_img)

# and pixels from the opposite angle:
plotPixels(loaded_img, angle = -45)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;These plots are certainly &lt;em&gt;fine&lt;/em&gt; if you want to scope out the color distribution in the image, but I wouldn’t want to display them for communication: the axis text is too large and some of the tick marks overlap; the axis labels are oddly spaced; and depending on the intention of the graphic, I might not want the grid or the plot frame. The axis label thing in particular has always bothered me.&lt;/p&gt;
&lt;p&gt;Some of those changes are possible to make by passing additional parameters to the &lt;code&gt;plotPixels&lt;/code&gt; function itself, but in practice, I often want more flexibility than this provides. Luckily, the function itself has such simple building blocks that it’s pretty easy to unpack them to get more customized plots.&lt;/p&gt;
&lt;p&gt;This is how &lt;code&gt;plotPixels&lt;/code&gt; works:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;It takes a dataframe of RGB colors, where pixels are rows and color channels are columns.&lt;/li&gt;
&lt;li&gt;It creates a vector of hex codes from the RGB colors to tell R which color to make each point.&lt;/li&gt;
&lt;li&gt;It uses &lt;a href=&#34;https://www.econstor.eu/handle/10419/77160&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;scatterplot3d&lt;/code&gt;&lt;/a&gt; to plot in the 3D color space indicated with the &lt;code&gt;color.space&lt;/code&gt; argument.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I chose the &lt;code&gt;scatterplot3d&lt;/code&gt; package because, of all the 3D plotting packages, it’s the most lightweight, and more or less just extends the base plotting syntax. It was also written in 2003, so there are a lot of newer packages that provide prettier output and more options, like &lt;a href=&#34;https://cran.r-project.org/web/packages/plot3D/index.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;plot3D&lt;/a&gt; by Karline Soetaert, or the &lt;a href=&#34;https://cran.r-project.org/web/packages/plotly/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;plotly&lt;/a&gt; library.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# load the plot3D library
library(plot3D)

# get the RGB pixel matrix
pixels &amp;lt;- loaded_img$filtered.rgb.2d

# make the hex color vector using the rgb() function
color_vector &amp;lt;- rgb(pixels); head(color_vector) # just a bunch of hex codes!
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;#247872&amp;quot; &amp;quot;#006862&amp;quot; &amp;quot;#006B62&amp;quot; &amp;quot;#00776A&amp;quot; &amp;quot;#00645C&amp;quot; &amp;quot;#007B71&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# use the scatter3D function
scatter3D(x = pixels[ , 1], 
          y = pixels[ , 2],
          z = pixels[ , 3], 
          colvar = 1:nrow(pixels), # &amp;lt;- note we have to make a fake &#39;variable&#39; to assign each pixel a different color
          col = color_vector, 
          colkey = FALSE, # gets rid of the (in this case meaningless) legend
          xlab = &amp;quot;Red&amp;quot;, ylab = &amp;quot;Green&amp;quot;, zlab = &amp;quot;Blue&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Even the default &lt;code&gt;scatter3D&lt;/code&gt; plot looks a lot better to me: the axis labels hug the axes, and the angle is nicer. We can get fancier with a lot of the options, too:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;scatter3D(x = pixels[ , 1], 
          y = pixels[ , 2],
          z = pixels[ , 3], 
          colvar = 1:nrow(pixels), 
          col = color_vector, colkey = F,
          xlab = &amp;quot;Red&amp;quot;, ylab = &amp;quot;Green&amp;quot;, zlab = &amp;quot;Blue&amp;quot;,
          xlim = 0:1, ylim = 0:1, zlim = 0:1, # RGB max and min
          pch = 19, # filled circles
          alpha = 0.5, # partially transparent
          theta = 115, phi = 25, # change viewing angle
          bty = &amp;quot;bl2&amp;quot;) # black grid background looks sort of cool
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;What if you want to plot in another color space besides RGB? The only difference is that you have to first convert your pixel matrix to a given color space, for which you have several options.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# convert pixels to CIE Lab coordinates
pixels_lab &amp;lt;- convertColor(pixels, from = &amp;quot;sRGB&amp;quot;, to = &amp;quot;Lab&amp;quot;)

# color vector remains the same!
color_vector &amp;lt;- rgb(pixels)

scatter3D(x = pixels_lab[ , 1], 
          y = pixels_lab[ , 2],
          z = pixels_lab[ , 3], 
          colvar = 1:nrow(pixels_lab), 
          col = color_vector, colkey = F,
          xlab = &amp;quot;Luminance&amp;quot;, ylab = &amp;quot;a (red-green)&amp;quot;, zlab = &amp;quot;b (yellow-blue)&amp;quot;,
          theta = 120, phi = -5,
          xlim = c(0, 100), 
          pch = 19, # filled circles
          alpha = 0.5, # partially transparent
          bty = &amp;quot;b2&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As an aside, it’s good practice to set the axis limits thoughtfully. This is easy with RGB: all three channels have a 0-1 range. With CIE Lab, this depends on your reference white. The L channel will always be 0-100, and the outer limits for the a and b channels are -127 to 128 each, but for a given reference white converting from sRGB it will be a subset within that range. The axis limits will be set to the range of the data by default, which could be misleading if you’re comparing plots of multiple images.&lt;/p&gt;
&lt;p&gt;If you’d rather have an interactive plot (especially helpful for data exploration), you can use the &lt;code&gt;plotly&lt;/code&gt; package. I find I have to implement more workarounds to get these plots to behave how I’d expect, but once you get out an interactive plot, it’s pretty slick:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(plotly, quietly = TRUE)

# let&#39;s subsample down to 100 pixels just for this example
pixel_sub &amp;lt;- as.data.frame(pixels[sample(1:nrow(pixels), 100), ])
plotly_colors &amp;lt;- rgb(pixel_sub)

# and plot!
plot_ly(data = pixel_sub, 
        x = ~r, y = ~g, z = ~b, 
        type = &amp;quot;scatter3d&amp;quot;, mode = &amp;quot;markers&amp;quot;, 
        color = I(plotly_colors), # this is a bit of a hack and you&#39;ll get a warning...
        colors = plotly_colors)
&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-1&#34; style=&#34;width:672px;height:480px;&#34; class=&#34;plotly html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-1&#34;&gt;{&#34;x&#34;:{&#34;visdat&#34;:{&#34;67c16a7081ae&#34;:[&#34;function () &#34;,&#34;plotlyVisDat&#34;]},&#34;cur_data&#34;:&#34;67c16a7081ae&#34;,&#34;attrs&#34;:{&#34;67c16a7081ae&#34;:{&#34;x&#34;:{},&#34;y&#34;:{},&#34;z&#34;:{},&#34;mode&#34;:&#34;markers&#34;,&#34;color&#34;:[&#34;#00766C&#34;,&#34;#33A000&#34;,&#34;#008B54&#34;,&#34;#5D9926&#34;,&#34;#616028&#34;,&#34;#9A1E26&#34;,&#34;#88AD00&#34;,&#34;#4E3737&#34;,&#34;#AF5D04&#34;,&#34;#911B2F&#34;,&#34;#60A000&#34;,&#34;#6D222D&#34;,&#34;#3D712D&#34;,&#34;#008F42&#34;,&#34;#00816F&#34;,&#34;#00614E&#34;,&#34;#9A9B00&#34;,&#34;#C44B44&#34;,&#34;#6A2728&#34;,&#34;#64762C&#34;,&#34;#736B68&#34;,&#34;#007A87&#34;,&#34;#479F40&#34;,&#34;#818000&#34;,&#34;#5D4B35&#34;,&#34;#00CDAA&#34;,&#34;#6F1E27&#34;,&#34;#478500&#34;,&#34;#9C2529&#34;,&#34;#7F322D&#34;,&#34;#6D2128&#34;,&#34;#D25F17&#34;,&#34;#57590E&#34;,&#34;#72692E&#34;,&#34;#999000&#34;,&#34;#E13E1D&#34;,&#34;#00A64D&#34;,&#34;#10529E&#34;,&#34;#009D3E&#34;,&#34;#3E9000&#34;,&#34;#592128&#34;,&#34;#CE5D0F&#34;,&#34;#526437&#34;,&#34;#4C3F39&#34;,&#34;#2B7523&#34;,&#34;#24CF9E&#34;,&#34;#A37008&#34;,&#34;#1EADBF&#34;,&#34;#369632&#34;,&#34;#E14231&#34;,&#34;#82222A&#34;,&#34;#62232F&#34;,&#34;#932E23&#34;,&#34;#32931F&#34;,&#34;#653031&#34;,&#34;#77202C&#34;,&#34;#8C5712&#34;,&#34;#007C84&#34;,&#34;#B7521C&#34;,&#34;#3D5342&#34;,&#34;#008355&#34;,&#34;#A27900&#34;,&#34;#9A9500&#34;,&#34;#008860&#34;,&#34;#5D7006&#34;,&#34;#8D1A21&#34;,&#34;#00604F&#34;,&#34;#005986&#34;,&#34;#A62B2D&#34;,&#34;#628B00&#34;,&#34;#008572&#34;,&#34;#29317B&#34;,&#34;#296D36&#34;,&#34;#008E54&#34;,&#34;#285D1D&#34;,&#34;#565F34&#34;,&#34;#A61835&#34;,&#34;#677606&#34;,&#34;#DA4428&#34;,&#34;#53824B&#34;,&#34;#5E8E0B&#34;,&#34;#00894A&#34;,&#34;#006B43&#34;,&#34;#008276&#34;,&#34;#007C78&#34;,&#34;#B5681E&#34;,&#34;#00885E&#34;,&#34;#7A8100&#34;,&#34;#E0512F&#34;,&#34;#382737&#34;,&#34;#009449&#34;,&#34;#719200&#34;,&#34;#408C2D&#34;,&#34;#005B70&#34;,&#34;#00A384&#34;,&#34;#614244&#34;,&#34;#2B9737&#34;,&#34;#07982F&#34;,&#34;#578E00&#34;,&#34;#61BF37&#34;],&#34;colors&#34;:[&#34;#00766C&#34;,&#34;#33A000&#34;,&#34;#008B54&#34;,&#34;#5D9926&#34;,&#34;#616028&#34;,&#34;#9A1E26&#34;,&#34;#88AD00&#34;,&#34;#4E3737&#34;,&#34;#AF5D04&#34;,&#34;#911B2F&#34;,&#34;#60A000&#34;,&#34;#6D222D&#34;,&#34;#3D712D&#34;,&#34;#008F42&#34;,&#34;#00816F&#34;,&#34;#00614E&#34;,&#34;#9A9B00&#34;,&#34;#C44B44&#34;,&#34;#6A2728&#34;,&#34;#64762C&#34;,&#34;#736B68&#34;,&#34;#007A87&#34;,&#34;#479F40&#34;,&#34;#818000&#34;,&#34;#5D4B35&#34;,&#34;#00CDAA&#34;,&#34;#6F1E27&#34;,&#34;#478500&#34;,&#34;#9C2529&#34;,&#34;#7F322D&#34;,&#34;#6D2128&#34;,&#34;#D25F17&#34;,&#34;#57590E&#34;,&#34;#72692E&#34;,&#34;#999000&#34;,&#34;#E13E1D&#34;,&#34;#00A64D&#34;,&#34;#10529E&#34;,&#34;#009D3E&#34;,&#34;#3E9000&#34;,&#34;#592128&#34;,&#34;#CE5D0F&#34;,&#34;#526437&#34;,&#34;#4C3F39&#34;,&#34;#2B7523&#34;,&#34;#24CF9E&#34;,&#34;#A37008&#34;,&#34;#1EADBF&#34;,&#34;#369632&#34;,&#34;#E14231&#34;,&#34;#82222A&#34;,&#34;#62232F&#34;,&#34;#932E23&#34;,&#34;#32931F&#34;,&#34;#653031&#34;,&#34;#77202C&#34;,&#34;#8C5712&#34;,&#34;#007C84&#34;,&#34;#B7521C&#34;,&#34;#3D5342&#34;,&#34;#008355&#34;,&#34;#A27900&#34;,&#34;#9A9500&#34;,&#34;#008860&#34;,&#34;#5D7006&#34;,&#34;#8D1A21&#34;,&#34;#00604F&#34;,&#34;#005986&#34;,&#34;#A62B2D&#34;,&#34;#628B00&#34;,&#34;#008572&#34;,&#34;#29317B&#34;,&#34;#296D36&#34;,&#34;#008E54&#34;,&#34;#285D1D&#34;,&#34;#565F34&#34;,&#34;#A61835&#34;,&#34;#677606&#34;,&#34;#DA4428&#34;,&#34;#53824B&#34;,&#34;#5E8E0B&#34;,&#34;#00894A&#34;,&#34;#006B43&#34;,&#34;#008276&#34;,&#34;#007C78&#34;,&#34;#B5681E&#34;,&#34;#00885E&#34;,&#34;#7A8100&#34;,&#34;#E0512F&#34;,&#34;#382737&#34;,&#34;#009449&#34;,&#34;#719200&#34;,&#34;#408C2D&#34;,&#34;#005B70&#34;,&#34;#00A384&#34;,&#34;#614244&#34;,&#34;#2B9737&#34;,&#34;#07982F&#34;,&#34;#578E00&#34;,&#34;#61BF37&#34;],&#34;alpha_stroke&#34;:1,&#34;sizes&#34;:[10,100],&#34;spans&#34;:[1,20],&#34;type&#34;:&#34;scatter3d&#34;}},&#34;layout&#34;:{&#34;margin&#34;:{&#34;b&#34;:40,&#34;l&#34;:60,&#34;t&#34;:25,&#34;r&#34;:10},&#34;scene&#34;:{&#34;xaxis&#34;:{&#34;title&#34;:&#34;r&#34;},&#34;yaxis&#34;:{&#34;title&#34;:&#34;g&#34;},&#34;zaxis&#34;:{&#34;title&#34;:&#34;b&#34;}},&#34;hovermode&#34;:&#34;closest&#34;,&#34;showlegend&#34;:false},&#34;source&#34;:&#34;A&#34;,&#34;config&#34;:{&#34;showSendToCloud&#34;:false},&#34;data&#34;:[{&#34;x&#34;:[0,0.2,0,0.364705882352941,0.380392156862745,0.603921568627451,0.533333333333333,0.305882352941176,0.686274509803922,0.568627450980392,0.376470588235294,0.427450980392157,0.23921568627451,0,0,0,0.603921568627451,0.768627450980392,0.415686274509804,0.392156862745098,0.450980392156863,0,0.27843137254902,0.505882352941176,0.364705882352941,0,0.435294117647059,0.27843137254902,0.611764705882353,0.498039215686275,0.427450980392157,0.823529411764706,0.341176470588235,0.447058823529412,0.6,0.882352941176471,0,0.0627450980392157,0,0.243137254901961,0.349019607843137,0.807843137254902,0.32156862745098,0.298039215686275,0.168627450980392,0.141176470588235,0.63921568627451,0.117647058823529,0.211764705882353,0.882352941176471,0.509803921568627,0.384313725490196,0.576470588235294,0.196078431372549,0.396078431372549,0.466666666666667,0.549019607843137,0,0.717647058823529,0.23921568627451,0,0.635294117647059,0.603921568627451,0,0.364705882352941,0.552941176470588,0,0,0.650980392156863,0.384313725490196,0,0.16078431372549,0.16078431372549,0,0.156862745098039,0.337254901960784,0.650980392156863,0.403921568627451,0.854901960784314,0.325490196078431,0.368627450980392,0,0,0,0,0.709803921568627,0,0.47843137254902,0.87843137254902,0.219607843137255,0,0.443137254901961,0.250980392156863,0,0,0.380392156862745,0.168627450980392,0.0274509803921569,0.341176470588235,0.380392156862745],&#34;y&#34;:[0.462745098039216,0.627450980392157,0.545098039215686,0.6,0.376470588235294,0.117647058823529,0.67843137254902,0.215686274509804,0.364705882352941,0.105882352941176,0.627450980392157,0.133333333333333,0.443137254901961,0.56078431372549,0.505882352941176,0.380392156862745,0.607843137254902,0.294117647058824,0.152941176470588,0.462745098039216,0.419607843137255,0.47843137254902,0.623529411764706,0.501960784313725,0.294117647058824,0.803921568627451,0.117647058823529,0.52156862745098,0.145098039215686,0.196078431372549,0.129411764705882,0.372549019607843,0.349019607843137,0.411764705882353,0.564705882352941,0.243137254901961,0.650980392156863,0.32156862745098,0.615686274509804,0.564705882352941,0.129411764705882,0.364705882352941,0.392156862745098,0.247058823529412,0.458823529411765,0.811764705882353,0.43921568627451,0.67843137254902,0.588235294117647,0.258823529411765,0.133333333333333,0.137254901960784,0.180392156862745,0.576470588235294,0.188235294117647,0.125490196078431,0.341176470588235,0.486274509803922,0.32156862745098,0.325490196078431,0.513725490196078,0.474509803921569,0.584313725490196,0.533333333333333,0.43921568627451,0.101960784313725,0.376470588235294,0.349019607843137,0.168627450980392,0.545098039215686,0.52156862745098,0.192156862745098,0.427450980392157,0.556862745098039,0.364705882352941,0.372549019607843,0.0941176470588235,0.462745098039216,0.266666666666667,0.509803921568627,0.556862745098039,0.537254901960784,0.419607843137255,0.509803921568627,0.486274509803922,0.407843137254902,0.533333333333333,0.505882352941176,0.317647058823529,0.152941176470588,0.580392156862745,0.572549019607843,0.549019607843137,0.356862745098039,0.63921568627451,0.258823529411765,0.592156862745098,0.596078431372549,0.556862745098039,0.749019607843137],&#34;z&#34;:[0.423529411764706,0,0.329411764705882,0.149019607843137,0.156862745098039,0.149019607843137,0,0.215686274509804,0.0156862745098039,0.184313725490196,0,0.176470588235294,0.176470588235294,0.258823529411765,0.435294117647059,0.305882352941176,0,0.266666666666667,0.156862745098039,0.172549019607843,0.407843137254902,0.529411764705882,0.250980392156863,0,0.207843137254902,0.666666666666667,0.152941176470588,0,0.16078431372549,0.176470588235294,0.156862745098039,0.0901960784313725,0.0549019607843137,0.180392156862745,0,0.113725490196078,0.301960784313725,0.619607843137255,0.243137254901961,0,0.156862745098039,0.0588235294117647,0.215686274509804,0.223529411764706,0.137254901960784,0.619607843137255,0.0313725490196078,0.749019607843137,0.196078431372549,0.192156862745098,0.164705882352941,0.184313725490196,0.137254901960784,0.12156862745098,0.192156862745098,0.172549019607843,0.0705882352941176,0.517647058823529,0.109803921568627,0.258823529411765,0.333333333333333,0,0,0.376470588235294,0.0235294117647059,0.129411764705882,0.309803921568627,0.525490196078431,0.176470588235294,0,0.447058823529412,0.482352941176471,0.211764705882353,0.329411764705882,0.113725490196078,0.203921568627451,0.207843137254902,0.0235294117647059,0.156862745098039,0.294117647058824,0.0431372549019608,0.290196078431373,0.262745098039216,0.462745098039216,0.470588235294118,0.117647058823529,0.368627450980392,0,0.184313725490196,0.215686274509804,0.286274509803922,0,0.176470588235294,0.43921568627451,0.517647058823529,0.266666666666667,0.215686274509804,0.184313725490196,0,0.215686274509804],&#34;mode&#34;:&#34;markers&#34;,&#34;type&#34;:&#34;scatter3d&#34;,&#34;marker&#34;:{&#34;color&#34;:[&#34;rgba(0,118,108,1)&#34;,&#34;rgba(51,160,0,1)&#34;,&#34;rgba(0,139,84,1)&#34;,&#34;rgba(93,153,38,1)&#34;,&#34;rgba(97,96,40,1)&#34;,&#34;rgba(154,30,38,1)&#34;,&#34;rgba(136,173,0,1)&#34;,&#34;rgba(78,55,55,1)&#34;,&#34;rgba(175,93,4,1)&#34;,&#34;rgba(145,27,47,1)&#34;,&#34;rgba(96,160,0,1)&#34;,&#34;rgba(109,34,45,1)&#34;,&#34;rgba(61,113,45,1)&#34;,&#34;rgba(0,143,66,1)&#34;,&#34;rgba(0,129,111,1)&#34;,&#34;rgba(0,97,78,1)&#34;,&#34;rgba(154,155,0,1)&#34;,&#34;rgba(196,75,68,1)&#34;,&#34;rgba(106,39,40,1)&#34;,&#34;rgba(100,118,44,1)&#34;,&#34;rgba(115,107,104,1)&#34;,&#34;rgba(0,122,135,1)&#34;,&#34;rgba(71,159,64,1)&#34;,&#34;rgba(129,128,0,1)&#34;,&#34;rgba(93,75,53,1)&#34;,&#34;rgba(0,205,170,1)&#34;,&#34;rgba(111,30,39,1)&#34;,&#34;rgba(71,133,0,1)&#34;,&#34;rgba(156,37,41,1)&#34;,&#34;rgba(127,50,45,1)&#34;,&#34;rgba(109,33,40,1)&#34;,&#34;rgba(210,95,23,1)&#34;,&#34;rgba(87,89,14,1)&#34;,&#34;rgba(114,105,46,1)&#34;,&#34;rgba(153,144,0,1)&#34;,&#34;rgba(225,62,29,1)&#34;,&#34;rgba(0,166,77,1)&#34;,&#34;rgba(16,82,158,1)&#34;,&#34;rgba(0,157,62,1)&#34;,&#34;rgba(62,144,0,1)&#34;,&#34;rgba(89,33,40,1)&#34;,&#34;rgba(206,93,15,1)&#34;,&#34;rgba(82,100,55,1)&#34;,&#34;rgba(76,63,57,1)&#34;,&#34;rgba(43,117,35,1)&#34;,&#34;rgba(36,207,158,1)&#34;,&#34;rgba(163,112,8,1)&#34;,&#34;rgba(30,173,191,1)&#34;,&#34;rgba(54,150,50,1)&#34;,&#34;rgba(225,66,49,1)&#34;,&#34;rgba(130,34,42,1)&#34;,&#34;rgba(98,35,47,1)&#34;,&#34;rgba(147,46,35,1)&#34;,&#34;rgba(50,147,31,1)&#34;,&#34;rgba(101,48,49,1)&#34;,&#34;rgba(119,32,44,1)&#34;,&#34;rgba(140,87,18,1)&#34;,&#34;rgba(0,124,132,1)&#34;,&#34;rgba(183,82,28,1)&#34;,&#34;rgba(61,83,66,1)&#34;,&#34;rgba(0,131,85,1)&#34;,&#34;rgba(162,121,0,1)&#34;,&#34;rgba(154,149,0,1)&#34;,&#34;rgba(0,136,96,1)&#34;,&#34;rgba(93,112,6,1)&#34;,&#34;rgba(141,26,33,1)&#34;,&#34;rgba(0,96,79,1)&#34;,&#34;rgba(0,89,134,1)&#34;,&#34;rgba(166,43,45,1)&#34;,&#34;rgba(98,139,0,1)&#34;,&#34;rgba(0,133,114,1)&#34;,&#34;rgba(41,49,123,1)&#34;,&#34;rgba(41,109,54,1)&#34;,&#34;rgba(0,142,84,1)&#34;,&#34;rgba(40,93,29,1)&#34;,&#34;rgba(86,95,52,1)&#34;,&#34;rgba(166,24,53,1)&#34;,&#34;rgba(103,118,6,1)&#34;,&#34;rgba(218,68,40,1)&#34;,&#34;rgba(83,130,75,1)&#34;,&#34;rgba(94,142,11,1)&#34;,&#34;rgba(0,137,74,1)&#34;,&#34;rgba(0,107,67,1)&#34;,&#34;rgba(0,130,118,1)&#34;,&#34;rgba(0,124,120,1)&#34;,&#34;rgba(181,104,30,1)&#34;,&#34;rgba(0,136,94,1)&#34;,&#34;rgba(122,129,0,1)&#34;,&#34;rgba(224,81,47,1)&#34;,&#34;rgba(56,39,55,1)&#34;,&#34;rgba(0,148,73,1)&#34;,&#34;rgba(113,146,0,1)&#34;,&#34;rgba(64,140,45,1)&#34;,&#34;rgba(0,91,112,1)&#34;,&#34;rgba(0,163,132,1)&#34;,&#34;rgba(97,66,68,1)&#34;,&#34;rgba(43,151,55,1)&#34;,&#34;rgba(7,152,47,1)&#34;,&#34;rgba(87,142,0,1)&#34;,&#34;rgba(97,191,55,1)&#34;],&#34;line&#34;:{&#34;color&#34;:[&#34;rgba(0,118,108,1)&#34;,&#34;rgba(51,160,0,1)&#34;,&#34;rgba(0,139,84,1)&#34;,&#34;rgba(93,153,38,1)&#34;,&#34;rgba(97,96,40,1)&#34;,&#34;rgba(154,30,38,1)&#34;,&#34;rgba(136,173,0,1)&#34;,&#34;rgba(78,55,55,1)&#34;,&#34;rgba(175,93,4,1)&#34;,&#34;rgba(145,27,47,1)&#34;,&#34;rgba(96,160,0,1)&#34;,&#34;rgba(109,34,45,1)&#34;,&#34;rgba(61,113,45,1)&#34;,&#34;rgba(0,143,66,1)&#34;,&#34;rgba(0,129,111,1)&#34;,&#34;rgba(0,97,78,1)&#34;,&#34;rgba(154,155,0,1)&#34;,&#34;rgba(196,75,68,1)&#34;,&#34;rgba(106,39,40,1)&#34;,&#34;rgba(100,118,44,1)&#34;,&#34;rgba(115,107,104,1)&#34;,&#34;rgba(0,122,135,1)&#34;,&#34;rgba(71,159,64,1)&#34;,&#34;rgba(129,128,0,1)&#34;,&#34;rgba(93,75,53,1)&#34;,&#34;rgba(0,205,170,1)&#34;,&#34;rgba(111,30,39,1)&#34;,&#34;rgba(71,133,0,1)&#34;,&#34;rgba(156,37,41,1)&#34;,&#34;rgba(127,50,45,1)&#34;,&#34;rgba(109,33,40,1)&#34;,&#34;rgba(210,95,23,1)&#34;,&#34;rgba(87,89,14,1)&#34;,&#34;rgba(114,105,46,1)&#34;,&#34;rgba(153,144,0,1)&#34;,&#34;rgba(225,62,29,1)&#34;,&#34;rgba(0,166,77,1)&#34;,&#34;rgba(16,82,158,1)&#34;,&#34;rgba(0,157,62,1)&#34;,&#34;rgba(62,144,0,1)&#34;,&#34;rgba(89,33,40,1)&#34;,&#34;rgba(206,93,15,1)&#34;,&#34;rgba(82,100,55,1)&#34;,&#34;rgba(76,63,57,1)&#34;,&#34;rgba(43,117,35,1)&#34;,&#34;rgba(36,207,158,1)&#34;,&#34;rgba(163,112,8,1)&#34;,&#34;rgba(30,173,191,1)&#34;,&#34;rgba(54,150,50,1)&#34;,&#34;rgba(225,66,49,1)&#34;,&#34;rgba(130,34,42,1)&#34;,&#34;rgba(98,35,47,1)&#34;,&#34;rgba(147,46,35,1)&#34;,&#34;rgba(50,147,31,1)&#34;,&#34;rgba(101,48,49,1)&#34;,&#34;rgba(119,32,44,1)&#34;,&#34;rgba(140,87,18,1)&#34;,&#34;rgba(0,124,132,1)&#34;,&#34;rgba(183,82,28,1)&#34;,&#34;rgba(61,83,66,1)&#34;,&#34;rgba(0,131,85,1)&#34;,&#34;rgba(162,121,0,1)&#34;,&#34;rgba(154,149,0,1)&#34;,&#34;rgba(0,136,96,1)&#34;,&#34;rgba(93,112,6,1)&#34;,&#34;rgba(141,26,33,1)&#34;,&#34;rgba(0,96,79,1)&#34;,&#34;rgba(0,89,134,1)&#34;,&#34;rgba(166,43,45,1)&#34;,&#34;rgba(98,139,0,1)&#34;,&#34;rgba(0,133,114,1)&#34;,&#34;rgba(41,49,123,1)&#34;,&#34;rgba(41,109,54,1)&#34;,&#34;rgba(0,142,84,1)&#34;,&#34;rgba(40,93,29,1)&#34;,&#34;rgba(86,95,52,1)&#34;,&#34;rgba(166,24,53,1)&#34;,&#34;rgba(103,118,6,1)&#34;,&#34;rgba(218,68,40,1)&#34;,&#34;rgba(83,130,75,1)&#34;,&#34;rgba(94,142,11,1)&#34;,&#34;rgba(0,137,74,1)&#34;,&#34;rgba(0,107,67,1)&#34;,&#34;rgba(0,130,118,1)&#34;,&#34;rgba(0,124,120,1)&#34;,&#34;rgba(181,104,30,1)&#34;,&#34;rgba(0,136,94,1)&#34;,&#34;rgba(122,129,0,1)&#34;,&#34;rgba(224,81,47,1)&#34;,&#34;rgba(56,39,55,1)&#34;,&#34;rgba(0,148,73,1)&#34;,&#34;rgba(113,146,0,1)&#34;,&#34;rgba(64,140,45,1)&#34;,&#34;rgba(0,91,112,1)&#34;,&#34;rgba(0,163,132,1)&#34;,&#34;rgba(97,66,68,1)&#34;,&#34;rgba(43,151,55,1)&#34;,&#34;rgba(7,152,47,1)&#34;,&#34;rgba(87,142,0,1)&#34;,&#34;rgba(97,191,55,1)&#34;]}},&#34;textfont&#34;:{&#34;color&#34;:[&#34;rgba(0,118,108,1)&#34;,&#34;rgba(51,160,0,1)&#34;,&#34;rgba(0,139,84,1)&#34;,&#34;rgba(93,153,38,1)&#34;,&#34;rgba(97,96,40,1)&#34;,&#34;rgba(154,30,38,1)&#34;,&#34;rgba(136,173,0,1)&#34;,&#34;rgba(78,55,55,1)&#34;,&#34;rgba(175,93,4,1)&#34;,&#34;rgba(145,27,47,1)&#34;,&#34;rgba(96,160,0,1)&#34;,&#34;rgba(109,34,45,1)&#34;,&#34;rgba(61,113,45,1)&#34;,&#34;rgba(0,143,66,1)&#34;,&#34;rgba(0,129,111,1)&#34;,&#34;rgba(0,97,78,1)&#34;,&#34;rgba(154,155,0,1)&#34;,&#34;rgba(196,75,68,1)&#34;,&#34;rgba(106,39,40,1)&#34;,&#34;rgba(100,118,44,1)&#34;,&#34;rgba(115,107,104,1)&#34;,&#34;rgba(0,122,135,1)&#34;,&#34;rgba(71,159,64,1)&#34;,&#34;rgba(129,128,0,1)&#34;,&#34;rgba(93,75,53,1)&#34;,&#34;rgba(0,205,170,1)&#34;,&#34;rgba(111,30,39,1)&#34;,&#34;rgba(71,133,0,1)&#34;,&#34;rgba(156,37,41,1)&#34;,&#34;rgba(127,50,45,1)&#34;,&#34;rgba(109,33,40,1)&#34;,&#34;rgba(210,95,23,1)&#34;,&#34;rgba(87,89,14,1)&#34;,&#34;rgba(114,105,46,1)&#34;,&#34;rgba(153,144,0,1)&#34;,&#34;rgba(225,62,29,1)&#34;,&#34;rgba(0,166,77,1)&#34;,&#34;rgba(16,82,158,1)&#34;,&#34;rgba(0,157,62,1)&#34;,&#34;rgba(62,144,0,1)&#34;,&#34;rgba(89,33,40,1)&#34;,&#34;rgba(206,93,15,1)&#34;,&#34;rgba(82,100,55,1)&#34;,&#34;rgba(76,63,57,1)&#34;,&#34;rgba(43,117,35,1)&#34;,&#34;rgba(36,207,158,1)&#34;,&#34;rgba(163,112,8,1)&#34;,&#34;rgba(30,173,191,1)&#34;,&#34;rgba(54,150,50,1)&#34;,&#34;rgba(225,66,49,1)&#34;,&#34;rgba(130,34,42,1)&#34;,&#34;rgba(98,35,47,1)&#34;,&#34;rgba(147,46,35,1)&#34;,&#34;rgba(50,147,31,1)&#34;,&#34;rgba(101,48,49,1)&#34;,&#34;rgba(119,32,44,1)&#34;,&#34;rgba(140,87,18,1)&#34;,&#34;rgba(0,124,132,1)&#34;,&#34;rgba(183,82,28,1)&#34;,&#34;rgba(61,83,66,1)&#34;,&#34;rgba(0,131,85,1)&#34;,&#34;rgba(162,121,0,1)&#34;,&#34;rgba(154,149,0,1)&#34;,&#34;rgba(0,136,96,1)&#34;,&#34;rgba(93,112,6,1)&#34;,&#34;rgba(141,26,33,1)&#34;,&#34;rgba(0,96,79,1)&#34;,&#34;rgba(0,89,134,1)&#34;,&#34;rgba(166,43,45,1)&#34;,&#34;rgba(98,139,0,1)&#34;,&#34;rgba(0,133,114,1)&#34;,&#34;rgba(41,49,123,1)&#34;,&#34;rgba(41,109,54,1)&#34;,&#34;rgba(0,142,84,1)&#34;,&#34;rgba(40,93,29,1)&#34;,&#34;rgba(86,95,52,1)&#34;,&#34;rgba(166,24,53,1)&#34;,&#34;rgba(103,118,6,1)&#34;,&#34;rgba(218,68,40,1)&#34;,&#34;rgba(83,130,75,1)&#34;,&#34;rgba(94,142,11,1)&#34;,&#34;rgba(0,137,74,1)&#34;,&#34;rgba(0,107,67,1)&#34;,&#34;rgba(0,130,118,1)&#34;,&#34;rgba(0,124,120,1)&#34;,&#34;rgba(181,104,30,1)&#34;,&#34;rgba(0,136,94,1)&#34;,&#34;rgba(122,129,0,1)&#34;,&#34;rgba(224,81,47,1)&#34;,&#34;rgba(56,39,55,1)&#34;,&#34;rgba(0,148,73,1)&#34;,&#34;rgba(113,146,0,1)&#34;,&#34;rgba(64,140,45,1)&#34;,&#34;rgba(0,91,112,1)&#34;,&#34;rgba(0,163,132,1)&#34;,&#34;rgba(97,66,68,1)&#34;,&#34;rgba(43,151,55,1)&#34;,&#34;rgba(7,152,47,1)&#34;,&#34;rgba(87,142,0,1)&#34;,&#34;rgba(97,191,55,1)&#34;]},&#34;line&#34;:{&#34;color&#34;:[&#34;rgba(0,118,108,1)&#34;,&#34;rgba(51,160,0,1)&#34;,&#34;rgba(0,139,84,1)&#34;,&#34;rgba(93,153,38,1)&#34;,&#34;rgba(97,96,40,1)&#34;,&#34;rgba(154,30,38,1)&#34;,&#34;rgba(136,173,0,1)&#34;,&#34;rgba(78,55,55,1)&#34;,&#34;rgba(175,93,4,1)&#34;,&#34;rgba(145,27,47,1)&#34;,&#34;rgba(96,160,0,1)&#34;,&#34;rgba(109,34,45,1)&#34;,&#34;rgba(61,113,45,1)&#34;,&#34;rgba(0,143,66,1)&#34;,&#34;rgba(0,129,111,1)&#34;,&#34;rgba(0,97,78,1)&#34;,&#34;rgba(154,155,0,1)&#34;,&#34;rgba(196,75,68,1)&#34;,&#34;rgba(106,39,40,1)&#34;,&#34;rgba(100,118,44,1)&#34;,&#34;rgba(115,107,104,1)&#34;,&#34;rgba(0,122,135,1)&#34;,&#34;rgba(71,159,64,1)&#34;,&#34;rgba(129,128,0,1)&#34;,&#34;rgba(93,75,53,1)&#34;,&#34;rgba(0,205,170,1)&#34;,&#34;rgba(111,30,39,1)&#34;,&#34;rgba(71,133,0,1)&#34;,&#34;rgba(156,37,41,1)&#34;,&#34;rgba(127,50,45,1)&#34;,&#34;rgba(109,33,40,1)&#34;,&#34;rgba(210,95,23,1)&#34;,&#34;rgba(87,89,14,1)&#34;,&#34;rgba(114,105,46,1)&#34;,&#34;rgba(153,144,0,1)&#34;,&#34;rgba(225,62,29,1)&#34;,&#34;rgba(0,166,77,1)&#34;,&#34;rgba(16,82,158,1)&#34;,&#34;rgba(0,157,62,1)&#34;,&#34;rgba(62,144,0,1)&#34;,&#34;rgba(89,33,40,1)&#34;,&#34;rgba(206,93,15,1)&#34;,&#34;rgba(82,100,55,1)&#34;,&#34;rgba(76,63,57,1)&#34;,&#34;rgba(43,117,35,1)&#34;,&#34;rgba(36,207,158,1)&#34;,&#34;rgba(163,112,8,1)&#34;,&#34;rgba(30,173,191,1)&#34;,&#34;rgba(54,150,50,1)&#34;,&#34;rgba(225,66,49,1)&#34;,&#34;rgba(130,34,42,1)&#34;,&#34;rgba(98,35,47,1)&#34;,&#34;rgba(147,46,35,1)&#34;,&#34;rgba(50,147,31,1)&#34;,&#34;rgba(101,48,49,1)&#34;,&#34;rgba(119,32,44,1)&#34;,&#34;rgba(140,87,18,1)&#34;,&#34;rgba(0,124,132,1)&#34;,&#34;rgba(183,82,28,1)&#34;,&#34;rgba(61,83,66,1)&#34;,&#34;rgba(0,131,85,1)&#34;,&#34;rgba(162,121,0,1)&#34;,&#34;rgba(154,149,0,1)&#34;,&#34;rgba(0,136,96,1)&#34;,&#34;rgba(93,112,6,1)&#34;,&#34;rgba(141,26,33,1)&#34;,&#34;rgba(0,96,79,1)&#34;,&#34;rgba(0,89,134,1)&#34;,&#34;rgba(166,43,45,1)&#34;,&#34;rgba(98,139,0,1)&#34;,&#34;rgba(0,133,114,1)&#34;,&#34;rgba(41,49,123,1)&#34;,&#34;rgba(41,109,54,1)&#34;,&#34;rgba(0,142,84,1)&#34;,&#34;rgba(40,93,29,1)&#34;,&#34;rgba(86,95,52,1)&#34;,&#34;rgba(166,24,53,1)&#34;,&#34;rgba(103,118,6,1)&#34;,&#34;rgba(218,68,40,1)&#34;,&#34;rgba(83,130,75,1)&#34;,&#34;rgba(94,142,11,1)&#34;,&#34;rgba(0,137,74,1)&#34;,&#34;rgba(0,107,67,1)&#34;,&#34;rgba(0,130,118,1)&#34;,&#34;rgba(0,124,120,1)&#34;,&#34;rgba(181,104,30,1)&#34;,&#34;rgba(0,136,94,1)&#34;,&#34;rgba(122,129,0,1)&#34;,&#34;rgba(224,81,47,1)&#34;,&#34;rgba(56,39,55,1)&#34;,&#34;rgba(0,148,73,1)&#34;,&#34;rgba(113,146,0,1)&#34;,&#34;rgba(64,140,45,1)&#34;,&#34;rgba(0,91,112,1)&#34;,&#34;rgba(0,163,132,1)&#34;,&#34;rgba(97,66,68,1)&#34;,&#34;rgba(43,151,55,1)&#34;,&#34;rgba(7,152,47,1)&#34;,&#34;rgba(87,142,0,1)&#34;,&#34;rgba(97,191,55,1)&#34;]},&#34;frame&#34;:null}],&#34;highlight&#34;:{&#34;on&#34;:&#34;plotly_click&#34;,&#34;persistent&#34;:false,&#34;dynamic&#34;:false,&#34;selectize&#34;:false,&#34;opacityDim&#34;:0.2,&#34;selected&#34;:{&#34;opacity&#34;:1},&#34;debounce&#34;:0},&#34;shinyEvents&#34;:[&#34;plotly_hover&#34;,&#34;plotly_click&#34;,&#34;plotly_selected&#34;,&#34;plotly_relayout&#34;,&#34;plotly_brushed&#34;,&#34;plotly_brushing&#34;,&#34;plotly_clickannotation&#34;,&#34;plotly_doubleclick&#34;,&#34;plotly_deselect&#34;,&#34;plotly_afterplot&#34;,&#34;plotly_sunburstclick&#34;],&#34;base_url&#34;:&#34;https://plot.ly&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;If you play around with this enough, you’ll realize that plotting all of your 3D data on a plot as individual points is kind of cumbersome when you have thousands of points; you can’t really tell which regions of your color space are more or less dense. It may better suit your purposes to cluster the data a bit first, and then plot the clusters:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;clusters &amp;lt;- extractClusters(getKMeanColors(img, color.space = &amp;quot;Lab&amp;quot;,
                                           ref.white = &amp;quot;D65&amp;quot;,
                                           n = 50, plotting = F))
colnames(clusters) &amp;lt;- c(&amp;quot;L&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;Pct&amp;quot;)

# We can do this with a colordistance function...
scatter3dclusters(clusters, color.space = &amp;quot;lab&amp;quot;, scaling = 100)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# we can also use scatter3D, with a bit of a hack to get different point sizes
col_vector &amp;lt;- rgb(convertColor(clusters[ , 1:3], from = &amp;quot;Lab&amp;quot;, to = &amp;quot;sRGB&amp;quot;))

# make blank plot
scatter3D(clusters$L, clusters$a, clusters$b, 
          cex = 0, colkey = F, phi = 35, theta = 60,
          xlab = &amp;quot;L&amp;quot;, ylab = &amp;quot;a&amp;quot;, zlab = &amp;quot;b&amp;quot;)

# set scale multiplier for point sizes
scale &amp;lt;- 80

# add one point at a time, setting size with the cex argument
for (i in 1:nrow(clusters)) {
  scatter3D(x = clusters$L[i],
           y = clusters$a[i],
           z = clusters$b[i],
           cex = clusters$Pct[i] * scale, 
           pch = 19, alpha = 0.5,
           col = col_vector[i], add = TRUE)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-6-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# or, we can just use plotly again
plot_ly(data = clusters,
        x = ~L, y = ~a, z = ~b, 
        type = &amp;quot;scatter3d&amp;quot;, mode = &amp;quot;markers&amp;quot;, 
        color = I(col_vector), # this is a bit of a hack and you&#39;ll get a warning...
        colors = col_vector, size = ~Pct)
&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-2&#34; style=&#34;width:672px;height:480px;&#34; class=&#34;plotly html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-2&#34;&gt;{&#34;x&#34;:{&#34;visdat&#34;:{&#34;67c12c3395a6&#34;:[&#34;function () &#34;,&#34;plotlyVisDat&#34;]},&#34;cur_data&#34;:&#34;67c12c3395a6&#34;,&#34;attrs&#34;:{&#34;67c12c3395a6&#34;:{&#34;x&#34;:{},&#34;y&#34;:{},&#34;z&#34;:{},&#34;mode&#34;:&#34;markers&#34;,&#34;color&#34;:[&#34;#2C9230&#34;,&#34;#4F9034&#34;,&#34;#65232B&#34;,&#34;#64512B&#34;,&#34;#BA7608&#34;,&#34;#047579&#34;,&#34;#118236&#34;,&#34;#7DAD0C&#34;,&#34;#9B222B&#34;,&#34;#C14323&#34;,&#34;#773A33&#34;,&#34;#572531&#34;,&#34;#18AEAC&#34;,&#34;#759006&#34;,&#34;#0C9849&#34;,&#34;#B92C2D&#34;,&#34;#7F1C32&#34;,&#34;#3D9810&#34;,&#34;#878408&#34;,&#34;#069157&#34;,&#34;#077C6C&#34;,&#34;#563F3B&#34;,&#34;#35C87C&#34;,&#34;#108DB0&#34;,&#34;#384D39&#34;,&#34;#5B790C&#34;,&#34;#22587E&#34;,&#34;#5B6B26&#34;,&#34;#99491C&#34;,&#34;#462F37&#34;,&#34;#788C47&#34;,&#34;#508B05&#34;,&#34;#B0A006&#34;,&#34;#10753C&#34;,&#34;#06667C&#34;,&#34;#722229&#34;,&#34;#232023&#34;,&#34;#1860A9&#34;,&#34;#796C29&#34;,&#34;#832128&#34;,&#34;#C66014&#34;,&#34;#0C8B68&#34;,&#34;#1BA53D&#34;,&#34;#545B2D&#34;,&#34;#8A8684&#34;,&#34;#3D7323&#34;,&#34;#9E7D0B&#34;,&#34;#0FCEA9&#34;,&#34;#54BD26&#34;,&#34;#266038&#34;],&#34;size&#34;:{},&#34;colors&#34;:[&#34;#2C9230&#34;,&#34;#4F9034&#34;,&#34;#65232B&#34;,&#34;#64512B&#34;,&#34;#BA7608&#34;,&#34;#047579&#34;,&#34;#118236&#34;,&#34;#7DAD0C&#34;,&#34;#9B222B&#34;,&#34;#C14323&#34;,&#34;#773A33&#34;,&#34;#572531&#34;,&#34;#18AEAC&#34;,&#34;#759006&#34;,&#34;#0C9849&#34;,&#34;#B92C2D&#34;,&#34;#7F1C32&#34;,&#34;#3D9810&#34;,&#34;#878408&#34;,&#34;#069157&#34;,&#34;#077C6C&#34;,&#34;#563F3B&#34;,&#34;#35C87C&#34;,&#34;#108DB0&#34;,&#34;#384D39&#34;,&#34;#5B790C&#34;,&#34;#22587E&#34;,&#34;#5B6B26&#34;,&#34;#99491C&#34;,&#34;#462F37&#34;,&#34;#788C47&#34;,&#34;#508B05&#34;,&#34;#B0A006&#34;,&#34;#10753C&#34;,&#34;#06667C&#34;,&#34;#722229&#34;,&#34;#232023&#34;,&#34;#1860A9&#34;,&#34;#796C29&#34;,&#34;#832128&#34;,&#34;#C66014&#34;,&#34;#0C8B68&#34;,&#34;#1BA53D&#34;,&#34;#545B2D&#34;,&#34;#8A8684&#34;,&#34;#3D7323&#34;,&#34;#9E7D0B&#34;,&#34;#0FCEA9&#34;,&#34;#54BD26&#34;,&#34;#266038&#34;],&#34;alpha_stroke&#34;:1,&#34;sizes&#34;:[10,100],&#34;spans&#34;:[1,20],&#34;type&#34;:&#34;scatter3d&#34;}},&#34;layout&#34;:{&#34;margin&#34;:{&#34;b&#34;:40,&#34;l&#34;:60,&#34;t&#34;:25,&#34;r&#34;:10},&#34;scene&#34;:{&#34;xaxis&#34;:{&#34;title&#34;:&#34;L&#34;},&#34;yaxis&#34;:{&#34;title&#34;:&#34;a&#34;},&#34;zaxis&#34;:{&#34;title&#34;:&#34;b&#34;}},&#34;hovermode&#34;:&#34;closest&#34;,&#34;showlegend&#34;:false},&#34;source&#34;:&#34;A&#34;,&#34;config&#34;:{&#34;showSendToCloud&#34;:false},&#34;data&#34;:[{&#34;x&#34;:[53.1946588835979,53.9596351095243,24.0976564584289,35.6036012488722,55.5373862751527,44.21651687503,47.4239445060195,65.0617731289884,34.7366402990177,46.3246684583419,32.2688263994665,22.3072555232524,64.5954107904765,55.6587946948685,54.9557114800121,41.8793760448375,28.4372845071126,55.6027567096673,53.7361972267739,52.7022094636126,46.3396917808826,28.9570681728065,71.8552991973423,54.3461739170174,30.5404554391342,46.8693842477265,35.5332956130365,42.624929276063,40.7316024142178,22.4432746780307,55.2473571923107,51.9350091118374,65.3565042379547,42.8796136944513,39.4002815788575,26.5751766715309,12.6447841819736,40.1338361320406,45.4889133027626,29.6856257044905,52.473964649942,51.2079509024561,59.4999358475635,37.127931684563,56.1685646806015,43.2088930516049,54.040194454177,74.1967967705915,68.1773193129727,35.8726842325365],&#34;y&#34;:[-48.9319862304724,-38.4536482875821,30.4167385062592,2.3539057625659,19.9103869337368,-25.3929355968667,-46.8051639349089,-36.1673476399427,49.4346316271018,49.0187579887318,26.4242721745034,24.1441341490294,-36.0422089936324,-25.9423324479601,-51.7743159618286,55.5545907805274,42.7470331463492,-49.35652253922,-11.8548377214015,-46.8254248527074,-32.8473500621974,9.55580938915399,-55.4621746976972,-18.7144718129058,-12.9982029817216,-25.7483339052722,-4.37777177199426,-17.044849697663,30.6051979420308,11.6178774961548,-18.4576791086705,-38.5919380690018,-7.74897265314973,-41.0652676233888,-16.2512192026847,35.4153216994582,2.1525074433549,6.26556465863796,-3.10589658426307,41.7167895034872,36.8445519801008,-40.3948331265627,-56.7045114720343,-10.9180035725077,1.16887389353378,-33.40460128885,3.39884180009848,-51.0882885468845,-55.3979626888029,-28.9688473920853],&#34;z&#34;:[42.0991071907099,41.5928558003257,10.3243909240605,25.2442662286597,60.7198716424919,-10.4896224844523,32.4818728664549,64.8746493593969,26.4265397751342,45.0519679923596,16.3889840689659,3.62900950231146,-9.46559838500863,58.0226451293352,31.9928079846149,34.6176261547054,12.7065401544778,55.0937166029178,56.8206774061723,21.3945487770611,0.258456447095425,6.31991316427493,27.0353200137217,-27.1244338341843,9.23917556208758,49.2046335367832,-26.5501909597621,35.88055124857,40.976202061052,-0.421345367822215,33.9912415917403,54.2427542170472,67.6467678886672,23.842303939043,-19.564988924393,15.6534462172701,-1.79597904549463,-45.4109435932668,38.0348617620099,21.0733611028549,56.4838942617785,10.0271807057811,43.2959492868798,25.7885320667752,1.55291947983258,37.2723855229067,57.4896097876359,6.41094893114716,61.1202159652607,17.2139594147985],&#34;mode&#34;:&#34;markers&#34;,&#34;type&#34;:&#34;scatter3d&#34;,&#34;marker&#34;:{&#34;color&#34;:[&#34;rgba(44,146,48,1)&#34;,&#34;rgba(79,144,52,1)&#34;,&#34;rgba(101,35,43,1)&#34;,&#34;rgba(100,81,43,1)&#34;,&#34;rgba(186,118,8,1)&#34;,&#34;rgba(4,117,121,1)&#34;,&#34;rgba(17,130,54,1)&#34;,&#34;rgba(125,173,12,1)&#34;,&#34;rgba(155,34,43,1)&#34;,&#34;rgba(193,67,35,1)&#34;,&#34;rgba(119,58,51,1)&#34;,&#34;rgba(87,37,49,1)&#34;,&#34;rgba(24,174,172,1)&#34;,&#34;rgba(117,144,6,1)&#34;,&#34;rgba(12,152,73,1)&#34;,&#34;rgba(185,44,45,1)&#34;,&#34;rgba(127,28,50,1)&#34;,&#34;rgba(61,152,16,1)&#34;,&#34;rgba(135,132,8,1)&#34;,&#34;rgba(6,145,87,1)&#34;,&#34;rgba(7,124,108,1)&#34;,&#34;rgba(86,63,59,1)&#34;,&#34;rgba(53,200,124,1)&#34;,&#34;rgba(16,141,176,1)&#34;,&#34;rgba(56,77,57,1)&#34;,&#34;rgba(91,121,12,1)&#34;,&#34;rgba(34,88,126,1)&#34;,&#34;rgba(91,107,38,1)&#34;,&#34;rgba(153,73,28,1)&#34;,&#34;rgba(70,47,55,1)&#34;,&#34;rgba(120,140,71,1)&#34;,&#34;rgba(80,139,5,1)&#34;,&#34;rgba(176,160,6,1)&#34;,&#34;rgba(16,117,60,1)&#34;,&#34;rgba(6,102,124,1)&#34;,&#34;rgba(114,34,41,1)&#34;,&#34;rgba(35,32,35,1)&#34;,&#34;rgba(24,96,169,1)&#34;,&#34;rgba(121,108,41,1)&#34;,&#34;rgba(131,33,40,1)&#34;,&#34;rgba(198,96,20,1)&#34;,&#34;rgba(12,139,104,1)&#34;,&#34;rgba(27,165,61,1)&#34;,&#34;rgba(84,91,45,1)&#34;,&#34;rgba(138,134,132,1)&#34;,&#34;rgba(61,115,35,1)&#34;,&#34;rgba(158,125,11,1)&#34;,&#34;rgba(15,206,169,1)&#34;,&#34;rgba(84,189,38,1)&#34;,&#34;rgba(38,96,56,1)&#34;],&#34;size&#34;:[48.2014388489209,40.2158273381295,80.7913669064748,30.2877697841727,34.1726618705036,59.4244604316547,56.6187050359712,32.6618705035971,62.0143884892086,45.6115107913669,13.6690647482014,43.4532374100719,17.7697841726619,62.2302158273381,70.431654676259,42.589928057554,31.5827338129496,73.0215827338129,55.5395683453237,61.5827338129496,54.8920863309352,50.3597122302158,12.3741007194245,10.6474820143885,31.5827338129496,58.5611510791367,28.1294964028777,45.8273381294964,25.3237410071942,64.8201438848921,24.2446043165468,100,19.9280575539568,40.863309352518,60.5035971223022,95.0359712230216,45.3956834532374,10,44.1007194244604,68.705035971223,31.7985611510791,60.0719424460432,52.9496402877698,49.0647482014388,16.9064748201439,44.1007194244604,44.1007194244604,18.8489208633094,23.8129496402878,28.3453237410072],&#34;sizemode&#34;:&#34;area&#34;,&#34;line&#34;:{&#34;color&#34;:[&#34;rgba(44,146,48,1)&#34;,&#34;rgba(79,144,52,1)&#34;,&#34;rgba(101,35,43,1)&#34;,&#34;rgba(100,81,43,1)&#34;,&#34;rgba(186,118,8,1)&#34;,&#34;rgba(4,117,121,1)&#34;,&#34;rgba(17,130,54,1)&#34;,&#34;rgba(125,173,12,1)&#34;,&#34;rgba(155,34,43,1)&#34;,&#34;rgba(193,67,35,1)&#34;,&#34;rgba(119,58,51,1)&#34;,&#34;rgba(87,37,49,1)&#34;,&#34;rgba(24,174,172,1)&#34;,&#34;rgba(117,144,6,1)&#34;,&#34;rgba(12,152,73,1)&#34;,&#34;rgba(185,44,45,1)&#34;,&#34;rgba(127,28,50,1)&#34;,&#34;rgba(61,152,16,1)&#34;,&#34;rgba(135,132,8,1)&#34;,&#34;rgba(6,145,87,1)&#34;,&#34;rgba(7,124,108,1)&#34;,&#34;rgba(86,63,59,1)&#34;,&#34;rgba(53,200,124,1)&#34;,&#34;rgba(16,141,176,1)&#34;,&#34;rgba(56,77,57,1)&#34;,&#34;rgba(91,121,12,1)&#34;,&#34;rgba(34,88,126,1)&#34;,&#34;rgba(91,107,38,1)&#34;,&#34;rgba(153,73,28,1)&#34;,&#34;rgba(70,47,55,1)&#34;,&#34;rgba(120,140,71,1)&#34;,&#34;rgba(80,139,5,1)&#34;,&#34;rgba(176,160,6,1)&#34;,&#34;rgba(16,117,60,1)&#34;,&#34;rgba(6,102,124,1)&#34;,&#34;rgba(114,34,41,1)&#34;,&#34;rgba(35,32,35,1)&#34;,&#34;rgba(24,96,169,1)&#34;,&#34;rgba(121,108,41,1)&#34;,&#34;rgba(131,33,40,1)&#34;,&#34;rgba(198,96,20,1)&#34;,&#34;rgba(12,139,104,1)&#34;,&#34;rgba(27,165,61,1)&#34;,&#34;rgba(84,91,45,1)&#34;,&#34;rgba(138,134,132,1)&#34;,&#34;rgba(61,115,35,1)&#34;,&#34;rgba(158,125,11,1)&#34;,&#34;rgba(15,206,169,1)&#34;,&#34;rgba(84,189,38,1)&#34;,&#34;rgba(38,96,56,1)&#34;]}},&#34;textfont&#34;:{&#34;color&#34;:[&#34;rgba(44,146,48,1)&#34;,&#34;rgba(79,144,52,1)&#34;,&#34;rgba(101,35,43,1)&#34;,&#34;rgba(100,81,43,1)&#34;,&#34;rgba(186,118,8,1)&#34;,&#34;rgba(4,117,121,1)&#34;,&#34;rgba(17,130,54,1)&#34;,&#34;rgba(125,173,12,1)&#34;,&#34;rgba(155,34,43,1)&#34;,&#34;rgba(193,67,35,1)&#34;,&#34;rgba(119,58,51,1)&#34;,&#34;rgba(87,37,49,1)&#34;,&#34;rgba(24,174,172,1)&#34;,&#34;rgba(117,144,6,1)&#34;,&#34;rgba(12,152,73,1)&#34;,&#34;rgba(185,44,45,1)&#34;,&#34;rgba(127,28,50,1)&#34;,&#34;rgba(61,152,16,1)&#34;,&#34;rgba(135,132,8,1)&#34;,&#34;rgba(6,145,87,1)&#34;,&#34;rgba(7,124,108,1)&#34;,&#34;rgba(86,63,59,1)&#34;,&#34;rgba(53,200,124,1)&#34;,&#34;rgba(16,141,176,1)&#34;,&#34;rgba(56,77,57,1)&#34;,&#34;rgba(91,121,12,1)&#34;,&#34;rgba(34,88,126,1)&#34;,&#34;rgba(91,107,38,1)&#34;,&#34;rgba(153,73,28,1)&#34;,&#34;rgba(70,47,55,1)&#34;,&#34;rgba(120,140,71,1)&#34;,&#34;rgba(80,139,5,1)&#34;,&#34;rgba(176,160,6,1)&#34;,&#34;rgba(16,117,60,1)&#34;,&#34;rgba(6,102,124,1)&#34;,&#34;rgba(114,34,41,1)&#34;,&#34;rgba(35,32,35,1)&#34;,&#34;rgba(24,96,169,1)&#34;,&#34;rgba(121,108,41,1)&#34;,&#34;rgba(131,33,40,1)&#34;,&#34;rgba(198,96,20,1)&#34;,&#34;rgba(12,139,104,1)&#34;,&#34;rgba(27,165,61,1)&#34;,&#34;rgba(84,91,45,1)&#34;,&#34;rgba(138,134,132,1)&#34;,&#34;rgba(61,115,35,1)&#34;,&#34;rgba(158,125,11,1)&#34;,&#34;rgba(15,206,169,1)&#34;,&#34;rgba(84,189,38,1)&#34;,&#34;rgba(38,96,56,1)&#34;],&#34;size&#34;:[48.2014388489209,40.2158273381295,80.7913669064748,30.2877697841727,34.1726618705036,59.4244604316547,56.6187050359712,32.6618705035971,62.0143884892086,45.6115107913669,13.6690647482014,43.4532374100719,17.7697841726619,62.2302158273381,70.431654676259,42.589928057554,31.5827338129496,73.0215827338129,55.5395683453237,61.5827338129496,54.8920863309352,50.3597122302158,12.3741007194245,10.6474820143885,31.5827338129496,58.5611510791367,28.1294964028777,45.8273381294964,25.3237410071942,64.8201438848921,24.2446043165468,100,19.9280575539568,40.863309352518,60.5035971223022,95.0359712230216,45.3956834532374,10,44.1007194244604,68.705035971223,31.7985611510791,60.0719424460432,52.9496402877698,49.0647482014388,16.9064748201439,44.1007194244604,44.1007194244604,18.8489208633094,23.8129496402878,28.3453237410072]},&#34;error_y&#34;:{&#34;width&#34;:[]},&#34;error_x&#34;:{&#34;width&#34;:[]},&#34;line&#34;:{&#34;color&#34;:[&#34;rgba(44,146,48,1)&#34;,&#34;rgba(79,144,52,1)&#34;,&#34;rgba(101,35,43,1)&#34;,&#34;rgba(100,81,43,1)&#34;,&#34;rgba(186,118,8,1)&#34;,&#34;rgba(4,117,121,1)&#34;,&#34;rgba(17,130,54,1)&#34;,&#34;rgba(125,173,12,1)&#34;,&#34;rgba(155,34,43,1)&#34;,&#34;rgba(193,67,35,1)&#34;,&#34;rgba(119,58,51,1)&#34;,&#34;rgba(87,37,49,1)&#34;,&#34;rgba(24,174,172,1)&#34;,&#34;rgba(117,144,6,1)&#34;,&#34;rgba(12,152,73,1)&#34;,&#34;rgba(185,44,45,1)&#34;,&#34;rgba(127,28,50,1)&#34;,&#34;rgba(61,152,16,1)&#34;,&#34;rgba(135,132,8,1)&#34;,&#34;rgba(6,145,87,1)&#34;,&#34;rgba(7,124,108,1)&#34;,&#34;rgba(86,63,59,1)&#34;,&#34;rgba(53,200,124,1)&#34;,&#34;rgba(16,141,176,1)&#34;,&#34;rgba(56,77,57,1)&#34;,&#34;rgba(91,121,12,1)&#34;,&#34;rgba(34,88,126,1)&#34;,&#34;rgba(91,107,38,1)&#34;,&#34;rgba(153,73,28,1)&#34;,&#34;rgba(70,47,55,1)&#34;,&#34;rgba(120,140,71,1)&#34;,&#34;rgba(80,139,5,1)&#34;,&#34;rgba(176,160,6,1)&#34;,&#34;rgba(16,117,60,1)&#34;,&#34;rgba(6,102,124,1)&#34;,&#34;rgba(114,34,41,1)&#34;,&#34;rgba(35,32,35,1)&#34;,&#34;rgba(24,96,169,1)&#34;,&#34;rgba(121,108,41,1)&#34;,&#34;rgba(131,33,40,1)&#34;,&#34;rgba(198,96,20,1)&#34;,&#34;rgba(12,139,104,1)&#34;,&#34;rgba(27,165,61,1)&#34;,&#34;rgba(84,91,45,1)&#34;,&#34;rgba(138,134,132,1)&#34;,&#34;rgba(61,115,35,1)&#34;,&#34;rgba(158,125,11,1)&#34;,&#34;rgba(15,206,169,1)&#34;,&#34;rgba(84,189,38,1)&#34;,&#34;rgba(38,96,56,1)&#34;]},&#34;frame&#34;:null}],&#34;highlight&#34;:{&#34;on&#34;:&#34;plotly_click&#34;,&#34;persistent&#34;:false,&#34;dynamic&#34;:false,&#34;selectize&#34;:false,&#34;opacityDim&#34;:0.2,&#34;selected&#34;:{&#34;opacity&#34;:1},&#34;debounce&#34;:0},&#34;shinyEvents&#34;:[&#34;plotly_hover&#34;,&#34;plotly_click&#34;,&#34;plotly_selected&#34;,&#34;plotly_relayout&#34;,&#34;plotly_brushed&#34;,&#34;plotly_brushing&#34;,&#34;plotly_clickannotation&#34;,&#34;plotly_doubleclick&#34;,&#34;plotly_deselect&#34;,&#34;plotly_afterplot&#34;,&#34;plotly_sunburstclick&#34;],&#34;base_url&#34;:&#34;https://plot.ly&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
</description>
    </item>
    
  </channel>
</rss>
