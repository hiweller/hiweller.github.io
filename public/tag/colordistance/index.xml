<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>colordistance | Hannah Weller</title>
    <link>/tag/colordistance/</link>
      <atom:link href="/tag/colordistance/index.xml" rel="self" type="application/rss+xml" />
    <description>colordistance</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><lastBuildDate>Tue, 13 Apr 2021 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/media/icon_hu894dd0f75b84cd2ded4b9885934a1072_25364_512x512_fill_lanczos_center_2.png</url>
      <title>colordistance</title>
      <link>/tag/colordistance/</link>
    </image>
    
    <item>
      <title>Modifying pixel plots</title>
      <link>/post/modifying-pixel-plots/</link>
      <pubDate>Tue, 13 Apr 2021 00:00:00 +0000</pubDate>
      <guid>/post/modifying-pixel-plots/</guid>
      <description>&lt;script src=&#34;/post/modifying-pixel-plots/index_files/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/plotly-binding/plotly.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/typedarray/typedarray.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/jquery/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/modifying-pixel-plots/index_files/crosstalk/css/crosstalk.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/crosstalk/js/crosstalk.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/modifying-pixel-plots/index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/plotly-main/plotly-latest.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/plotly-binding/plotly.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/typedarray/typedarray.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/jquery/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/modifying-pixel-plots/index_files/crosstalk/css/crosstalk.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/crosstalk/js/crosstalk.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;/post/modifying-pixel-plots/index_files/plotly-htmlwidgets-css/plotly-htmlwidgets.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;/post/modifying-pixel-plots/index_files/plotly-main/plotly-latest.min.js&#34;&gt;&lt;/script&gt;
&lt;p&gt;The &lt;code&gt;plotPixels&lt;/code&gt; function in &lt;code&gt;colordistance&lt;/code&gt; is pretty inflexible. It was originally meant as a diagnostic tool, and the plots it produces are not exactly beautiful:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(colordistance)

# image from the &#39;recolorize&#39; package (github.com/hiweller/recolorize)
img &amp;lt;- system.file(&amp;quot;extdata/fulgidissima.png&amp;quot;, package = &amp;quot;recolorize&amp;quot;)

# load the image:
loaded_img &amp;lt;- loadImage(img)

# set the plot layout for opposing pixel plots
layout(matrix(1:3, nrow = 1), widths = c(0.46, 0.08, 0.46))

# plot the pixels in RGB color space from two angles:
plotPixels(loaded_img)

# plot the original image
par(mar = rep(0, 4)) # no margin
plotImage(loaded_img)

# and pixels from the opposite angle:
plotPixels(loaded_img, angle = -45)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;These plots are certainly &lt;em&gt;fine&lt;/em&gt; if you want to scope out the color distribution in the image, but I wouldn’t want to display them for communication: the axis text is too large and some of the tick marks overlap; the axis labels are oddly spaced; and depending on the intention of the graphic, I might not want the grid or the plot frame. The axis label thing in particular has always bothered me.&lt;/p&gt;
&lt;p&gt;Some of those changes are possible to make by passing additional parameters to the &lt;code&gt;plotPixels&lt;/code&gt; function itself, but in practice, I often want more flexibility than this provides. Luckily, the function itself has such simple building blocks that it’s pretty easy to unpack them to get more customized plots.&lt;/p&gt;
&lt;p&gt;This is how &lt;code&gt;plotPixels&lt;/code&gt; works:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;It takes a dataframe of RGB colors, where pixels are rows and color channels are columns.&lt;/li&gt;
&lt;li&gt;It creates a vector of hex codes from the RGB colors to tell R which color to make each point.&lt;/li&gt;
&lt;li&gt;It uses &lt;a href=&#34;https://www.econstor.eu/handle/10419/77160&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;scatterplot3d&lt;/code&gt;&lt;/a&gt; to plot in the 3D color space indicated with the &lt;code&gt;color.space&lt;/code&gt; argument.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I chose the &lt;code&gt;scatterplot3d&lt;/code&gt; package because, of all the 3D plotting packages, it’s the most lightweight, and more or less just extends the base plotting syntax. It was also written in 2003, so there are a lot of newer packages that provide prettier output and more options, like &lt;a href=&#34;https://cran.r-project.org/web/packages/plot3D/index.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;plot3D&lt;/a&gt; by Karline Soetaert, or the &lt;a href=&#34;https://cran.r-project.org/web/packages/plotly/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;plotly&lt;/a&gt; library.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# load the plot3D library
library(plot3D)

# get the RGB pixel matrix
pixels &amp;lt;- loaded_img$filtered.rgb.2d

# make the hex color vector using the rgb() function
color_vector &amp;lt;- rgb(pixels); head(color_vector) # just a bunch of hex codes!
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;#247872&amp;quot; &amp;quot;#006862&amp;quot; &amp;quot;#006B62&amp;quot; &amp;quot;#00776A&amp;quot; &amp;quot;#00645C&amp;quot; &amp;quot;#007B71&amp;quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# use the scatter3D function
scatter3D(x = pixels[ , 1], 
          y = pixels[ , 2],
          z = pixels[ , 3], 
          colvar = 1:nrow(pixels), # &amp;lt;- note we have to make a fake &#39;variable&#39; to assign each pixel a different color
          col = color_vector, 
          colkey = FALSE, # gets rid of the (in this case meaningless) legend
          xlab = &amp;quot;Red&amp;quot;, ylab = &amp;quot;Green&amp;quot;, zlab = &amp;quot;Blue&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Even the default &lt;code&gt;scatter3D&lt;/code&gt; plot looks a lot better to me: the axis labels hug the axes, and the angle is nicer. We can get fancier with a lot of the options, too:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;scatter3D(x = pixels[ , 1], 
          y = pixels[ , 2],
          z = pixels[ , 3], 
          colvar = 1:nrow(pixels), 
          col = color_vector, colkey = F,
          xlab = &amp;quot;Red&amp;quot;, ylab = &amp;quot;Green&amp;quot;, zlab = &amp;quot;Blue&amp;quot;,
          xlim = 0:1, ylim = 0:1, zlim = 0:1, # RGB max and min
          pch = 19, # filled circles
          alpha = 0.5, # partially transparent
          theta = 115, phi = 25, # change viewing angle
          bty = &amp;quot;bl2&amp;quot;) # black grid background looks sort of cool
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;What if you want to plot in another color space besides RGB? The only difference is that you have to first convert your pixel matrix to a given color space, for which you have several options.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# convert pixels to CIE Lab coordinates
pixels_lab &amp;lt;- convertColor(pixels, from = &amp;quot;sRGB&amp;quot;, to = &amp;quot;Lab&amp;quot;)

# color vector remains the same!
color_vector &amp;lt;- rgb(pixels)

scatter3D(x = pixels_lab[ , 1], 
          y = pixels_lab[ , 2],
          z = pixels_lab[ , 3], 
          colvar = 1:nrow(pixels_lab), 
          col = color_vector, colkey = F,
          xlab = &amp;quot;Luminance&amp;quot;, ylab = &amp;quot;a (red-green)&amp;quot;, zlab = &amp;quot;b (yellow-blue)&amp;quot;,
          theta = 120, phi = -5,
          xlim = c(0, 100), 
          pch = 19, # filled circles
          alpha = 0.5, # partially transparent
          bty = &amp;quot;b2&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As an aside, it’s good practice to set the axis limits thoughtfully. This is easy with RGB: all three channels have a 0-1 range. With CIE Lab, this depends on your reference white. The L channel will always be 0-100, and the outer limits for the a and b channels are -127 to 128 each, but for a given reference white converting from sRGB it will be a subset within that range. The axis limits will be set to the range of the data by default, which could be misleading if you’re comparing plots of multiple images.&lt;/p&gt;
&lt;p&gt;If you’d rather have an interactive plot (especially helpful for data exploration), you can use the &lt;code&gt;plotly&lt;/code&gt; package. I find I have to implement more workarounds to get these plots to behave how I’d expect, but once you get out an interactive plot, it’s pretty slick:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(plotly, quietly = TRUE)

# let&#39;s subsample down to 100 pixels just for this example
pixel_sub &amp;lt;- as.data.frame(pixels[sample(1:nrow(pixels), 100), ])
plotly_colors &amp;lt;- rgb(pixel_sub)

# and plot!
plot_ly(data = pixel_sub, 
        x = ~r, y = ~g, z = ~b, 
        type = &amp;quot;scatter3d&amp;quot;, mode = &amp;quot;markers&amp;quot;, 
        color = I(plotly_colors), # this is a bit of a hack and you&#39;ll get a warning...
        colors = plotly_colors)
&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-1&#34; style=&#34;width:672px;height:480px;&#34; class=&#34;plotly html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-1&#34;&gt;{&#34;x&#34;:{&#34;visdat&#34;:{&#34;948a74a44f66&#34;:[&#34;function () &#34;,&#34;plotlyVisDat&#34;]},&#34;cur_data&#34;:&#34;948a74a44f66&#34;,&#34;attrs&#34;:{&#34;948a74a44f66&#34;:{&#34;x&#34;:{},&#34;y&#34;:{},&#34;z&#34;:{},&#34;mode&#34;:&#34;markers&#34;,&#34;color&#34;:[&#34;#4D272F&#34;,&#34;#008173&#34;,&#34;#220C10&#34;,&#34;#DB4042&#34;,&#34;#402E2E&#34;,&#34;#6A2023&#34;,&#34;#342232&#34;,&#34;#578900&#34;,&#34;#31811C&#34;,&#34;#6B813F&#34;,&#34;#0092BA&#34;,&#34;#4B3842&#34;,&#34;#9F343D&#34;,&#34;#00AD7B&#34;,&#34;#52AA23&#34;,&#34;#51333D&#34;,&#34;#0B803A&#34;,&#34;#405D44&#34;,&#34;#549BC2&#34;,&#34;#709200&#34;,&#34;#559864&#34;,&#34;#67202C&#34;,&#34;#6E7600&#34;,&#34;#007E3A&#34;,&#34;#38A337&#34;,&#34;#676A20&#34;,&#34;#55423B&#34;,&#34;#85C400&#34;,&#34;#425F46&#34;,&#34;#009D42&#34;,&#34;#37833C&#34;,&#34;#31AC00&#34;,&#34;#539000&#34;,&#34;#C43628&#34;,&#34;#858F00&#34;,&#34;#9B1F2C&#34;,&#34;#009C3D&#34;,&#34;#B9202A&#34;,&#34;#50512C&#34;,&#34;#8A8884&#34;,&#34;#822122&#34;,&#34;#329D86&#34;,&#34;#6F661D&#34;,&#34;#008D3B&#34;,&#34;#006E45&#34;,&#34;#006E7A&#34;,&#34;#861A31&#34;,&#34;#339000&#34;,&#34;#427A0F&#34;,&#34;#BBC4E1&#34;,&#34;#29A234&#34;,&#34;#52781E&#34;,&#34;#049509&#34;,&#34;#877D00&#34;,&#34;#78131D&#34;,&#34;#509B35&#34;,&#34;#0084D4&#34;,&#34;#00B27B&#34;,&#34;#00697F&#34;,&#34;#7D272B&#34;,&#34;#44A212&#34;,&#34;#BA9E00&#34;,&#34;#6E303B&#34;,&#34;#325E3D&#34;,&#34;#288929&#34;,&#34;#781E21&#34;,&#34;#638B00&#34;,&#34;#1A1B20&#34;,&#34;#E47C00&#34;,&#34;#832330&#34;,&#34;#837F41&#34;,&#34;#546E0D&#34;,&#34;#611F22&#34;,&#34;#30822C&#34;,&#34;#66272E&#34;,&#34;#7A770C&#34;,&#34;#6E7600&#34;,&#34;#3B6E3D&#34;,&#34;#972931&#34;,&#34;#009658&#34;,&#34;#573B39&#34;,&#34;#1D963C&#34;,&#34;#00DCBE&#34;,&#34;#4A5786&#34;,&#34;#8B8E00&#34;,&#34;#006A85&#34;,&#34;#00852E&#34;,&#34;#4E803E&#34;,&#34;#006C82&#34;,&#34;#00972E&#34;,&#34;#009037&#34;,&#34;#4C711E&#34;,&#34;#531C29&#34;,&#34;#0072A8&#34;,&#34;#3B262B&#34;,&#34;#4C9628&#34;,&#34;#698A35&#34;,&#34;#658300&#34;,&#34;#B96612&#34;,&#34;#9F5918&#34;],&#34;colors&#34;:[&#34;#4D272F&#34;,&#34;#008173&#34;,&#34;#220C10&#34;,&#34;#DB4042&#34;,&#34;#402E2E&#34;,&#34;#6A2023&#34;,&#34;#342232&#34;,&#34;#578900&#34;,&#34;#31811C&#34;,&#34;#6B813F&#34;,&#34;#0092BA&#34;,&#34;#4B3842&#34;,&#34;#9F343D&#34;,&#34;#00AD7B&#34;,&#34;#52AA23&#34;,&#34;#51333D&#34;,&#34;#0B803A&#34;,&#34;#405D44&#34;,&#34;#549BC2&#34;,&#34;#709200&#34;,&#34;#559864&#34;,&#34;#67202C&#34;,&#34;#6E7600&#34;,&#34;#007E3A&#34;,&#34;#38A337&#34;,&#34;#676A20&#34;,&#34;#55423B&#34;,&#34;#85C400&#34;,&#34;#425F46&#34;,&#34;#009D42&#34;,&#34;#37833C&#34;,&#34;#31AC00&#34;,&#34;#539000&#34;,&#34;#C43628&#34;,&#34;#858F00&#34;,&#34;#9B1F2C&#34;,&#34;#009C3D&#34;,&#34;#B9202A&#34;,&#34;#50512C&#34;,&#34;#8A8884&#34;,&#34;#822122&#34;,&#34;#329D86&#34;,&#34;#6F661D&#34;,&#34;#008D3B&#34;,&#34;#006E45&#34;,&#34;#006E7A&#34;,&#34;#861A31&#34;,&#34;#339000&#34;,&#34;#427A0F&#34;,&#34;#BBC4E1&#34;,&#34;#29A234&#34;,&#34;#52781E&#34;,&#34;#049509&#34;,&#34;#877D00&#34;,&#34;#78131D&#34;,&#34;#509B35&#34;,&#34;#0084D4&#34;,&#34;#00B27B&#34;,&#34;#00697F&#34;,&#34;#7D272B&#34;,&#34;#44A212&#34;,&#34;#BA9E00&#34;,&#34;#6E303B&#34;,&#34;#325E3D&#34;,&#34;#288929&#34;,&#34;#781E21&#34;,&#34;#638B00&#34;,&#34;#1A1B20&#34;,&#34;#E47C00&#34;,&#34;#832330&#34;,&#34;#837F41&#34;,&#34;#546E0D&#34;,&#34;#611F22&#34;,&#34;#30822C&#34;,&#34;#66272E&#34;,&#34;#7A770C&#34;,&#34;#6E7600&#34;,&#34;#3B6E3D&#34;,&#34;#972931&#34;,&#34;#009658&#34;,&#34;#573B39&#34;,&#34;#1D963C&#34;,&#34;#00DCBE&#34;,&#34;#4A5786&#34;,&#34;#8B8E00&#34;,&#34;#006A85&#34;,&#34;#00852E&#34;,&#34;#4E803E&#34;,&#34;#006C82&#34;,&#34;#00972E&#34;,&#34;#009037&#34;,&#34;#4C711E&#34;,&#34;#531C29&#34;,&#34;#0072A8&#34;,&#34;#3B262B&#34;,&#34;#4C9628&#34;,&#34;#698A35&#34;,&#34;#658300&#34;,&#34;#B96612&#34;,&#34;#9F5918&#34;],&#34;alpha_stroke&#34;:1,&#34;sizes&#34;:[10,100],&#34;spans&#34;:[1,20],&#34;type&#34;:&#34;scatter3d&#34;}},&#34;layout&#34;:{&#34;margin&#34;:{&#34;b&#34;:40,&#34;l&#34;:60,&#34;t&#34;:25,&#34;r&#34;:10},&#34;scene&#34;:{&#34;xaxis&#34;:{&#34;title&#34;:&#34;r&#34;},&#34;yaxis&#34;:{&#34;title&#34;:&#34;g&#34;},&#34;zaxis&#34;:{&#34;title&#34;:&#34;b&#34;}},&#34;hovermode&#34;:&#34;closest&#34;,&#34;showlegend&#34;:false},&#34;source&#34;:&#34;A&#34;,&#34;config&#34;:{&#34;showSendToCloud&#34;:false},&#34;data&#34;:[{&#34;x&#34;:[0.301960784313725,0,0.133333333333333,0.858823529411765,0.250980392156863,0.415686274509804,0.203921568627451,0.341176470588235,0.192156862745098,0.419607843137255,0,0.294117647058824,0.623529411764706,0,0.32156862745098,0.317647058823529,0.0431372549019608,0.250980392156863,0.329411764705882,0.43921568627451,0.333333333333333,0.403921568627451,0.431372549019608,0,0.219607843137255,0.403921568627451,0.333333333333333,0.52156862745098,0.258823529411765,0,0.215686274509804,0.192156862745098,0.325490196078431,0.768627450980392,0.52156862745098,0.607843137254902,0,0.725490196078431,0.313725490196078,0.541176470588235,0.509803921568627,0.196078431372549,0.435294117647059,0,0,0,0.525490196078431,0.2,0.258823529411765,0.733333333333333,0.16078431372549,0.32156862745098,0.0156862745098039,0.529411764705882,0.470588235294118,0.313725490196078,0,0,0,0.490196078431373,0.266666666666667,0.729411764705882,0.431372549019608,0.196078431372549,0.156862745098039,0.470588235294118,0.388235294117647,0.101960784313725,0.894117647058824,0.513725490196078,0.513725490196078,0.329411764705882,0.380392156862745,0.188235294117647,0.4,0.47843137254902,0.431372549019608,0.231372549019608,0.592156862745098,0,0.341176470588235,0.113725490196078,0,0.290196078431373,0.545098039215686,0,0,0.305882352941176,0,0,0,0.298039215686275,0.325490196078431,0,0.231372549019608,0.298039215686275,0.411764705882353,0.396078431372549,0.725490196078431,0.623529411764706],&#34;y&#34;:[0.152941176470588,0.505882352941176,0.0470588235294118,0.250980392156863,0.180392156862745,0.125490196078431,0.133333333333333,0.537254901960784,0.505882352941176,0.505882352941176,0.572549019607843,0.219607843137255,0.203921568627451,0.67843137254902,0.666666666666667,0.2,0.501960784313725,0.364705882352941,0.607843137254902,0.572549019607843,0.596078431372549,0.125490196078431,0.462745098039216,0.494117647058824,0.63921568627451,0.415686274509804,0.258823529411765,0.768627450980392,0.372549019607843,0.615686274509804,0.513725490196078,0.674509803921569,0.564705882352941,0.211764705882353,0.56078431372549,0.12156862745098,0.611764705882353,0.125490196078431,0.317647058823529,0.533333333333333,0.129411764705882,0.615686274509804,0.4,0.552941176470588,0.431372549019608,0.431372549019608,0.101960784313725,0.564705882352941,0.47843137254902,0.768627450980392,0.635294117647059,0.470588235294118,0.584313725490196,0.490196078431373,0.0745098039215686,0.607843137254902,0.517647058823529,0.698039215686274,0.411764705882353,0.152941176470588,0.635294117647059,0.619607843137255,0.188235294117647,0.368627450980392,0.537254901960784,0.117647058823529,0.545098039215686,0.105882352941176,0.486274509803922,0.137254901960784,0.498039215686275,0.431372549019608,0.12156862745098,0.509803921568627,0.152941176470588,0.466666666666667,0.462745098039216,0.431372549019608,0.16078431372549,0.588235294117647,0.231372549019608,0.588235294117647,0.862745098039216,0.341176470588235,0.556862745098039,0.415686274509804,0.52156862745098,0.501960784313725,0.423529411764706,0.592156862745098,0.564705882352941,0.443137254901961,0.109803921568627,0.447058823529412,0.149019607843137,0.588235294117647,0.541176470588235,0.513725490196078,0.4,0.349019607843137],&#34;z&#34;:[0.184313725490196,0.450980392156863,0.0627450980392157,0.258823529411765,0.180392156862745,0.137254901960784,0.196078431372549,0,0.109803921568627,0.247058823529412,0.729411764705882,0.258823529411765,0.23921568627451,0.482352941176471,0.137254901960784,0.23921568627451,0.227450980392157,0.266666666666667,0.76078431372549,0,0.392156862745098,0.172549019607843,0,0.227450980392157,0.215686274509804,0.125490196078431,0.231372549019608,0,0.274509803921569,0.258823529411765,0.235294117647059,0,0,0.156862745098039,0,0.172549019607843,0.23921568627451,0.164705882352941,0.172549019607843,0.517647058823529,0.133333333333333,0.525490196078431,0.113725490196078,0.231372549019608,0.270588235294118,0.47843137254902,0.192156862745098,0,0.0588235294117647,0.882352941176471,0.203921568627451,0.117647058823529,0.0352941176470588,0,0.113725490196078,0.207843137254902,0.831372549019608,0.482352941176471,0.498039215686275,0.168627450980392,0.0705882352941176,0,0.231372549019608,0.23921568627451,0.16078431372549,0.129411764705882,0,0.125490196078431,0,0.188235294117647,0.254901960784314,0.0509803921568627,0.133333333333333,0.172549019607843,0.180392156862745,0.0470588235294118,0,0.23921568627451,0.192156862745098,0.345098039215686,0.223529411764706,0.235294117647059,0.745098039215686,0.525490196078431,0,0.52156862745098,0.180392156862745,0.243137254901961,0.509803921568627,0.180392156862745,0.215686274509804,0.117647058823529,0.16078431372549,0.658823529411765,0.168627450980392,0.156862745098039,0.207843137254902,0,0.0705882352941176,0.0941176470588235],&#34;mode&#34;:&#34;markers&#34;,&#34;type&#34;:&#34;scatter3d&#34;,&#34;marker&#34;:{&#34;color&#34;:[&#34;rgba(77,39,47,1)&#34;,&#34;rgba(0,129,115,1)&#34;,&#34;rgba(34,12,16,1)&#34;,&#34;rgba(219,64,66,1)&#34;,&#34;rgba(64,46,46,1)&#34;,&#34;rgba(106,32,35,1)&#34;,&#34;rgba(52,34,50,1)&#34;,&#34;rgba(87,137,0,1)&#34;,&#34;rgba(49,129,28,1)&#34;,&#34;rgba(107,129,63,1)&#34;,&#34;rgba(0,146,186,1)&#34;,&#34;rgba(75,56,66,1)&#34;,&#34;rgba(159,52,61,1)&#34;,&#34;rgba(0,173,123,1)&#34;,&#34;rgba(82,170,35,1)&#34;,&#34;rgba(81,51,61,1)&#34;,&#34;rgba(11,128,58,1)&#34;,&#34;rgba(64,93,68,1)&#34;,&#34;rgba(84,155,194,1)&#34;,&#34;rgba(112,146,0,1)&#34;,&#34;rgba(85,152,100,1)&#34;,&#34;rgba(103,32,44,1)&#34;,&#34;rgba(110,118,0,1)&#34;,&#34;rgba(0,126,58,1)&#34;,&#34;rgba(56,163,55,1)&#34;,&#34;rgba(103,106,32,1)&#34;,&#34;rgba(85,66,59,1)&#34;,&#34;rgba(133,196,0,1)&#34;,&#34;rgba(66,95,70,1)&#34;,&#34;rgba(0,157,66,1)&#34;,&#34;rgba(55,131,60,1)&#34;,&#34;rgba(49,172,0,1)&#34;,&#34;rgba(83,144,0,1)&#34;,&#34;rgba(196,54,40,1)&#34;,&#34;rgba(133,143,0,1)&#34;,&#34;rgba(155,31,44,1)&#34;,&#34;rgba(0,156,61,1)&#34;,&#34;rgba(185,32,42,1)&#34;,&#34;rgba(80,81,44,1)&#34;,&#34;rgba(138,136,132,1)&#34;,&#34;rgba(130,33,34,1)&#34;,&#34;rgba(50,157,134,1)&#34;,&#34;rgba(111,102,29,1)&#34;,&#34;rgba(0,141,59,1)&#34;,&#34;rgba(0,110,69,1)&#34;,&#34;rgba(0,110,122,1)&#34;,&#34;rgba(134,26,49,1)&#34;,&#34;rgba(51,144,0,1)&#34;,&#34;rgba(66,122,15,1)&#34;,&#34;rgba(187,196,225,1)&#34;,&#34;rgba(41,162,52,1)&#34;,&#34;rgba(82,120,30,1)&#34;,&#34;rgba(4,149,9,1)&#34;,&#34;rgba(135,125,0,1)&#34;,&#34;rgba(120,19,29,1)&#34;,&#34;rgba(80,155,53,1)&#34;,&#34;rgba(0,132,212,1)&#34;,&#34;rgba(0,178,123,1)&#34;,&#34;rgba(0,105,127,1)&#34;,&#34;rgba(125,39,43,1)&#34;,&#34;rgba(68,162,18,1)&#34;,&#34;rgba(186,158,0,1)&#34;,&#34;rgba(110,48,59,1)&#34;,&#34;rgba(50,94,61,1)&#34;,&#34;rgba(40,137,41,1)&#34;,&#34;rgba(120,30,33,1)&#34;,&#34;rgba(99,139,0,1)&#34;,&#34;rgba(26,27,32,1)&#34;,&#34;rgba(228,124,0,1)&#34;,&#34;rgba(131,35,48,1)&#34;,&#34;rgba(131,127,65,1)&#34;,&#34;rgba(84,110,13,1)&#34;,&#34;rgba(97,31,34,1)&#34;,&#34;rgba(48,130,44,1)&#34;,&#34;rgba(102,39,46,1)&#34;,&#34;rgba(122,119,12,1)&#34;,&#34;rgba(110,118,0,1)&#34;,&#34;rgba(59,110,61,1)&#34;,&#34;rgba(151,41,49,1)&#34;,&#34;rgba(0,150,88,1)&#34;,&#34;rgba(87,59,57,1)&#34;,&#34;rgba(29,150,60,1)&#34;,&#34;rgba(0,220,190,1)&#34;,&#34;rgba(74,87,134,1)&#34;,&#34;rgba(139,142,0,1)&#34;,&#34;rgba(0,106,133,1)&#34;,&#34;rgba(0,133,46,1)&#34;,&#34;rgba(78,128,62,1)&#34;,&#34;rgba(0,108,130,1)&#34;,&#34;rgba(0,151,46,1)&#34;,&#34;rgba(0,144,55,1)&#34;,&#34;rgba(76,113,30,1)&#34;,&#34;rgba(83,28,41,1)&#34;,&#34;rgba(0,114,168,1)&#34;,&#34;rgba(59,38,43,1)&#34;,&#34;rgba(76,150,40,1)&#34;,&#34;rgba(105,138,53,1)&#34;,&#34;rgba(101,131,0,1)&#34;,&#34;rgba(185,102,18,1)&#34;,&#34;rgba(159,89,24,1)&#34;],&#34;line&#34;:{&#34;color&#34;:[&#34;rgba(77,39,47,1)&#34;,&#34;rgba(0,129,115,1)&#34;,&#34;rgba(34,12,16,1)&#34;,&#34;rgba(219,64,66,1)&#34;,&#34;rgba(64,46,46,1)&#34;,&#34;rgba(106,32,35,1)&#34;,&#34;rgba(52,34,50,1)&#34;,&#34;rgba(87,137,0,1)&#34;,&#34;rgba(49,129,28,1)&#34;,&#34;rgba(107,129,63,1)&#34;,&#34;rgba(0,146,186,1)&#34;,&#34;rgba(75,56,66,1)&#34;,&#34;rgba(159,52,61,1)&#34;,&#34;rgba(0,173,123,1)&#34;,&#34;rgba(82,170,35,1)&#34;,&#34;rgba(81,51,61,1)&#34;,&#34;rgba(11,128,58,1)&#34;,&#34;rgba(64,93,68,1)&#34;,&#34;rgba(84,155,194,1)&#34;,&#34;rgba(112,146,0,1)&#34;,&#34;rgba(85,152,100,1)&#34;,&#34;rgba(103,32,44,1)&#34;,&#34;rgba(110,118,0,1)&#34;,&#34;rgba(0,126,58,1)&#34;,&#34;rgba(56,163,55,1)&#34;,&#34;rgba(103,106,32,1)&#34;,&#34;rgba(85,66,59,1)&#34;,&#34;rgba(133,196,0,1)&#34;,&#34;rgba(66,95,70,1)&#34;,&#34;rgba(0,157,66,1)&#34;,&#34;rgba(55,131,60,1)&#34;,&#34;rgba(49,172,0,1)&#34;,&#34;rgba(83,144,0,1)&#34;,&#34;rgba(196,54,40,1)&#34;,&#34;rgba(133,143,0,1)&#34;,&#34;rgba(155,31,44,1)&#34;,&#34;rgba(0,156,61,1)&#34;,&#34;rgba(185,32,42,1)&#34;,&#34;rgba(80,81,44,1)&#34;,&#34;rgba(138,136,132,1)&#34;,&#34;rgba(130,33,34,1)&#34;,&#34;rgba(50,157,134,1)&#34;,&#34;rgba(111,102,29,1)&#34;,&#34;rgba(0,141,59,1)&#34;,&#34;rgba(0,110,69,1)&#34;,&#34;rgba(0,110,122,1)&#34;,&#34;rgba(134,26,49,1)&#34;,&#34;rgba(51,144,0,1)&#34;,&#34;rgba(66,122,15,1)&#34;,&#34;rgba(187,196,225,1)&#34;,&#34;rgba(41,162,52,1)&#34;,&#34;rgba(82,120,30,1)&#34;,&#34;rgba(4,149,9,1)&#34;,&#34;rgba(135,125,0,1)&#34;,&#34;rgba(120,19,29,1)&#34;,&#34;rgba(80,155,53,1)&#34;,&#34;rgba(0,132,212,1)&#34;,&#34;rgba(0,178,123,1)&#34;,&#34;rgba(0,105,127,1)&#34;,&#34;rgba(125,39,43,1)&#34;,&#34;rgba(68,162,18,1)&#34;,&#34;rgba(186,158,0,1)&#34;,&#34;rgba(110,48,59,1)&#34;,&#34;rgba(50,94,61,1)&#34;,&#34;rgba(40,137,41,1)&#34;,&#34;rgba(120,30,33,1)&#34;,&#34;rgba(99,139,0,1)&#34;,&#34;rgba(26,27,32,1)&#34;,&#34;rgba(228,124,0,1)&#34;,&#34;rgba(131,35,48,1)&#34;,&#34;rgba(131,127,65,1)&#34;,&#34;rgba(84,110,13,1)&#34;,&#34;rgba(97,31,34,1)&#34;,&#34;rgba(48,130,44,1)&#34;,&#34;rgba(102,39,46,1)&#34;,&#34;rgba(122,119,12,1)&#34;,&#34;rgba(110,118,0,1)&#34;,&#34;rgba(59,110,61,1)&#34;,&#34;rgba(151,41,49,1)&#34;,&#34;rgba(0,150,88,1)&#34;,&#34;rgba(87,59,57,1)&#34;,&#34;rgba(29,150,60,1)&#34;,&#34;rgba(0,220,190,1)&#34;,&#34;rgba(74,87,134,1)&#34;,&#34;rgba(139,142,0,1)&#34;,&#34;rgba(0,106,133,1)&#34;,&#34;rgba(0,133,46,1)&#34;,&#34;rgba(78,128,62,1)&#34;,&#34;rgba(0,108,130,1)&#34;,&#34;rgba(0,151,46,1)&#34;,&#34;rgba(0,144,55,1)&#34;,&#34;rgba(76,113,30,1)&#34;,&#34;rgba(83,28,41,1)&#34;,&#34;rgba(0,114,168,1)&#34;,&#34;rgba(59,38,43,1)&#34;,&#34;rgba(76,150,40,1)&#34;,&#34;rgba(105,138,53,1)&#34;,&#34;rgba(101,131,0,1)&#34;,&#34;rgba(185,102,18,1)&#34;,&#34;rgba(159,89,24,1)&#34;]}},&#34;textfont&#34;:{&#34;color&#34;:[&#34;rgba(77,39,47,1)&#34;,&#34;rgba(0,129,115,1)&#34;,&#34;rgba(34,12,16,1)&#34;,&#34;rgba(219,64,66,1)&#34;,&#34;rgba(64,46,46,1)&#34;,&#34;rgba(106,32,35,1)&#34;,&#34;rgba(52,34,50,1)&#34;,&#34;rgba(87,137,0,1)&#34;,&#34;rgba(49,129,28,1)&#34;,&#34;rgba(107,129,63,1)&#34;,&#34;rgba(0,146,186,1)&#34;,&#34;rgba(75,56,66,1)&#34;,&#34;rgba(159,52,61,1)&#34;,&#34;rgba(0,173,123,1)&#34;,&#34;rgba(82,170,35,1)&#34;,&#34;rgba(81,51,61,1)&#34;,&#34;rgba(11,128,58,1)&#34;,&#34;rgba(64,93,68,1)&#34;,&#34;rgba(84,155,194,1)&#34;,&#34;rgba(112,146,0,1)&#34;,&#34;rgba(85,152,100,1)&#34;,&#34;rgba(103,32,44,1)&#34;,&#34;rgba(110,118,0,1)&#34;,&#34;rgba(0,126,58,1)&#34;,&#34;rgba(56,163,55,1)&#34;,&#34;rgba(103,106,32,1)&#34;,&#34;rgba(85,66,59,1)&#34;,&#34;rgba(133,196,0,1)&#34;,&#34;rgba(66,95,70,1)&#34;,&#34;rgba(0,157,66,1)&#34;,&#34;rgba(55,131,60,1)&#34;,&#34;rgba(49,172,0,1)&#34;,&#34;rgba(83,144,0,1)&#34;,&#34;rgba(196,54,40,1)&#34;,&#34;rgba(133,143,0,1)&#34;,&#34;rgba(155,31,44,1)&#34;,&#34;rgba(0,156,61,1)&#34;,&#34;rgba(185,32,42,1)&#34;,&#34;rgba(80,81,44,1)&#34;,&#34;rgba(138,136,132,1)&#34;,&#34;rgba(130,33,34,1)&#34;,&#34;rgba(50,157,134,1)&#34;,&#34;rgba(111,102,29,1)&#34;,&#34;rgba(0,141,59,1)&#34;,&#34;rgba(0,110,69,1)&#34;,&#34;rgba(0,110,122,1)&#34;,&#34;rgba(134,26,49,1)&#34;,&#34;rgba(51,144,0,1)&#34;,&#34;rgba(66,122,15,1)&#34;,&#34;rgba(187,196,225,1)&#34;,&#34;rgba(41,162,52,1)&#34;,&#34;rgba(82,120,30,1)&#34;,&#34;rgba(4,149,9,1)&#34;,&#34;rgba(135,125,0,1)&#34;,&#34;rgba(120,19,29,1)&#34;,&#34;rgba(80,155,53,1)&#34;,&#34;rgba(0,132,212,1)&#34;,&#34;rgba(0,178,123,1)&#34;,&#34;rgba(0,105,127,1)&#34;,&#34;rgba(125,39,43,1)&#34;,&#34;rgba(68,162,18,1)&#34;,&#34;rgba(186,158,0,1)&#34;,&#34;rgba(110,48,59,1)&#34;,&#34;rgba(50,94,61,1)&#34;,&#34;rgba(40,137,41,1)&#34;,&#34;rgba(120,30,33,1)&#34;,&#34;rgba(99,139,0,1)&#34;,&#34;rgba(26,27,32,1)&#34;,&#34;rgba(228,124,0,1)&#34;,&#34;rgba(131,35,48,1)&#34;,&#34;rgba(131,127,65,1)&#34;,&#34;rgba(84,110,13,1)&#34;,&#34;rgba(97,31,34,1)&#34;,&#34;rgba(48,130,44,1)&#34;,&#34;rgba(102,39,46,1)&#34;,&#34;rgba(122,119,12,1)&#34;,&#34;rgba(110,118,0,1)&#34;,&#34;rgba(59,110,61,1)&#34;,&#34;rgba(151,41,49,1)&#34;,&#34;rgba(0,150,88,1)&#34;,&#34;rgba(87,59,57,1)&#34;,&#34;rgba(29,150,60,1)&#34;,&#34;rgba(0,220,190,1)&#34;,&#34;rgba(74,87,134,1)&#34;,&#34;rgba(139,142,0,1)&#34;,&#34;rgba(0,106,133,1)&#34;,&#34;rgba(0,133,46,1)&#34;,&#34;rgba(78,128,62,1)&#34;,&#34;rgba(0,108,130,1)&#34;,&#34;rgba(0,151,46,1)&#34;,&#34;rgba(0,144,55,1)&#34;,&#34;rgba(76,113,30,1)&#34;,&#34;rgba(83,28,41,1)&#34;,&#34;rgba(0,114,168,1)&#34;,&#34;rgba(59,38,43,1)&#34;,&#34;rgba(76,150,40,1)&#34;,&#34;rgba(105,138,53,1)&#34;,&#34;rgba(101,131,0,1)&#34;,&#34;rgba(185,102,18,1)&#34;,&#34;rgba(159,89,24,1)&#34;]},&#34;line&#34;:{&#34;color&#34;:[&#34;rgba(77,39,47,1)&#34;,&#34;rgba(0,129,115,1)&#34;,&#34;rgba(34,12,16,1)&#34;,&#34;rgba(219,64,66,1)&#34;,&#34;rgba(64,46,46,1)&#34;,&#34;rgba(106,32,35,1)&#34;,&#34;rgba(52,34,50,1)&#34;,&#34;rgba(87,137,0,1)&#34;,&#34;rgba(49,129,28,1)&#34;,&#34;rgba(107,129,63,1)&#34;,&#34;rgba(0,146,186,1)&#34;,&#34;rgba(75,56,66,1)&#34;,&#34;rgba(159,52,61,1)&#34;,&#34;rgba(0,173,123,1)&#34;,&#34;rgba(82,170,35,1)&#34;,&#34;rgba(81,51,61,1)&#34;,&#34;rgba(11,128,58,1)&#34;,&#34;rgba(64,93,68,1)&#34;,&#34;rgba(84,155,194,1)&#34;,&#34;rgba(112,146,0,1)&#34;,&#34;rgba(85,152,100,1)&#34;,&#34;rgba(103,32,44,1)&#34;,&#34;rgba(110,118,0,1)&#34;,&#34;rgba(0,126,58,1)&#34;,&#34;rgba(56,163,55,1)&#34;,&#34;rgba(103,106,32,1)&#34;,&#34;rgba(85,66,59,1)&#34;,&#34;rgba(133,196,0,1)&#34;,&#34;rgba(66,95,70,1)&#34;,&#34;rgba(0,157,66,1)&#34;,&#34;rgba(55,131,60,1)&#34;,&#34;rgba(49,172,0,1)&#34;,&#34;rgba(83,144,0,1)&#34;,&#34;rgba(196,54,40,1)&#34;,&#34;rgba(133,143,0,1)&#34;,&#34;rgba(155,31,44,1)&#34;,&#34;rgba(0,156,61,1)&#34;,&#34;rgba(185,32,42,1)&#34;,&#34;rgba(80,81,44,1)&#34;,&#34;rgba(138,136,132,1)&#34;,&#34;rgba(130,33,34,1)&#34;,&#34;rgba(50,157,134,1)&#34;,&#34;rgba(111,102,29,1)&#34;,&#34;rgba(0,141,59,1)&#34;,&#34;rgba(0,110,69,1)&#34;,&#34;rgba(0,110,122,1)&#34;,&#34;rgba(134,26,49,1)&#34;,&#34;rgba(51,144,0,1)&#34;,&#34;rgba(66,122,15,1)&#34;,&#34;rgba(187,196,225,1)&#34;,&#34;rgba(41,162,52,1)&#34;,&#34;rgba(82,120,30,1)&#34;,&#34;rgba(4,149,9,1)&#34;,&#34;rgba(135,125,0,1)&#34;,&#34;rgba(120,19,29,1)&#34;,&#34;rgba(80,155,53,1)&#34;,&#34;rgba(0,132,212,1)&#34;,&#34;rgba(0,178,123,1)&#34;,&#34;rgba(0,105,127,1)&#34;,&#34;rgba(125,39,43,1)&#34;,&#34;rgba(68,162,18,1)&#34;,&#34;rgba(186,158,0,1)&#34;,&#34;rgba(110,48,59,1)&#34;,&#34;rgba(50,94,61,1)&#34;,&#34;rgba(40,137,41,1)&#34;,&#34;rgba(120,30,33,1)&#34;,&#34;rgba(99,139,0,1)&#34;,&#34;rgba(26,27,32,1)&#34;,&#34;rgba(228,124,0,1)&#34;,&#34;rgba(131,35,48,1)&#34;,&#34;rgba(131,127,65,1)&#34;,&#34;rgba(84,110,13,1)&#34;,&#34;rgba(97,31,34,1)&#34;,&#34;rgba(48,130,44,1)&#34;,&#34;rgba(102,39,46,1)&#34;,&#34;rgba(122,119,12,1)&#34;,&#34;rgba(110,118,0,1)&#34;,&#34;rgba(59,110,61,1)&#34;,&#34;rgba(151,41,49,1)&#34;,&#34;rgba(0,150,88,1)&#34;,&#34;rgba(87,59,57,1)&#34;,&#34;rgba(29,150,60,1)&#34;,&#34;rgba(0,220,190,1)&#34;,&#34;rgba(74,87,134,1)&#34;,&#34;rgba(139,142,0,1)&#34;,&#34;rgba(0,106,133,1)&#34;,&#34;rgba(0,133,46,1)&#34;,&#34;rgba(78,128,62,1)&#34;,&#34;rgba(0,108,130,1)&#34;,&#34;rgba(0,151,46,1)&#34;,&#34;rgba(0,144,55,1)&#34;,&#34;rgba(76,113,30,1)&#34;,&#34;rgba(83,28,41,1)&#34;,&#34;rgba(0,114,168,1)&#34;,&#34;rgba(59,38,43,1)&#34;,&#34;rgba(76,150,40,1)&#34;,&#34;rgba(105,138,53,1)&#34;,&#34;rgba(101,131,0,1)&#34;,&#34;rgba(185,102,18,1)&#34;,&#34;rgba(159,89,24,1)&#34;]},&#34;frame&#34;:null}],&#34;highlight&#34;:{&#34;on&#34;:&#34;plotly_click&#34;,&#34;persistent&#34;:false,&#34;dynamic&#34;:false,&#34;selectize&#34;:false,&#34;opacityDim&#34;:0.2,&#34;selected&#34;:{&#34;opacity&#34;:1},&#34;debounce&#34;:0},&#34;shinyEvents&#34;:[&#34;plotly_hover&#34;,&#34;plotly_click&#34;,&#34;plotly_selected&#34;,&#34;plotly_relayout&#34;,&#34;plotly_brushed&#34;,&#34;plotly_brushing&#34;,&#34;plotly_clickannotation&#34;,&#34;plotly_doubleclick&#34;,&#34;plotly_deselect&#34;,&#34;plotly_afterplot&#34;,&#34;plotly_sunburstclick&#34;],&#34;base_url&#34;:&#34;https://plot.ly&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;p&gt;If you play around with this enough, you’ll realize that plotting all of your 3D data on a plot as individual points is kind of cumbersome when you have thousands of points; you can’t really tell which regions of your color space are more or less dense. It may better suit your purposes to cluster the data a bit first, and then plot the clusters:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;clusters &amp;lt;- extractClusters(getKMeanColors(img, color.space = &amp;quot;Lab&amp;quot;,
                                           ref.white = &amp;quot;D65&amp;quot;,
                                           n = 50, plotting = F))
colnames(clusters) &amp;lt;- c(&amp;quot;L&amp;quot;, &amp;quot;a&amp;quot;, &amp;quot;b&amp;quot;, &amp;quot;Pct&amp;quot;)

# We can do this with a colordistance function...
scatter3dclusters(clusters, color.space = &amp;quot;lab&amp;quot;, scaling = 100)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# we can also use scatter3D, with a bit of a hack to get different point sizes
col_vector &amp;lt;- rgb(convertColor(clusters[ , 1:3], from = &amp;quot;Lab&amp;quot;, to = &amp;quot;sRGB&amp;quot;))

# make blank plot
scatter3D(clusters$L, clusters$a, clusters$b, 
          cex = 0, colkey = F, phi = 35, theta = 60,
          xlab = &amp;quot;L&amp;quot;, ylab = &amp;quot;a&amp;quot;, zlab = &amp;quot;b&amp;quot;)

# set scale multiplier for point sizes
scale &amp;lt;- 80

# add one point at a time, setting size with the cex argument
for (i in 1:nrow(clusters)) {
  scatter3D(x = clusters$L[i],
           y = clusters$a[i],
           z = clusters$b[i],
           cex = clusters$Pct[i] * scale, 
           pch = 19, alpha = 0.5,
           col = col_vector[i], add = TRUE)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/modifying-pixel-plots/index_files/figure-html/unnamed-chunk-6-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;# or, we can just use plotly again
plot_ly(data = clusters,
        x = ~L, y = ~a, z = ~b, 
        type = &amp;quot;scatter3d&amp;quot;, mode = &amp;quot;markers&amp;quot;, 
        color = I(col_vector), # this is a bit of a hack and you&#39;ll get a warning...
        colors = col_vector, size = ~Pct)
&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-2&#34; style=&#34;width:672px;height:480px;&#34; class=&#34;plotly html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-2&#34;&gt;{&#34;x&#34;:{&#34;visdat&#34;:{&#34;948a2bab3c7f&#34;:[&#34;function () &#34;,&#34;plotlyVisDat&#34;]},&#34;cur_data&#34;:&#34;948a2bab3c7f&#34;,&#34;attrs&#34;:{&#34;948a2bab3c7f&#34;:{&#34;x&#34;:{},&#34;y&#34;:{},&#34;z&#34;:{},&#34;mode&#34;:&#34;markers&#34;,&#34;color&#34;:[&#34;#647933&#34;,&#34;#732429&#34;,&#34;#986516&#34;,&#34;#832128&#34;,&#34;#232023&#34;,&#34;#138233&#34;,&#34;#943E1F&#34;,&#34;#17AEAB&#34;,&#34;#0C8864&#34;,&#34;#499535&#34;,&#34;#384D39&#34;,&#34;#573F3B&#34;,&#34;#9F8008&#34;,&#34;#047579&#34;,&#34;#077C6D&#34;,&#34;#108DB0&#34;,&#34;#BA2E2C&#34;,&#34;#06667C&#34;,&#34;#0DD7B4&#34;,&#34;#86B20D&#34;,&#34;#8B8784&#34;,&#34;#5F780B&#34;,&#34;#766D2A&#34;,&#34;#C06012&#34;,&#34;#1860A9&#34;,&#34;#62512B&#34;,&#34;#B1A206&#34;,&#34;#545D2C&#34;,&#34;#37CA7A&#34;,&#34;#22587E&#34;,&#34;#3A9610&#34;,&#34;#55BC26&#34;,&#34;#66242C&#34;,&#34;#473037&#34;,&#34;#C34622&#34;,&#34;#038E51&#34;,&#34;#1EA43A&#34;,&#34;#C17C08&#34;,&#34;#4B8407&#34;,&#34;#10753B&#34;,&#34;#758F07&#34;,&#34;#15AA7C&#34;,&#34;#265F37&#34;,&#34;#7E1C32&#34;,&#34;#119846&#34;,&#34;#9C212B&#34;,&#34;#898609&#34;,&#34;#582531&#34;,&#34;#5E9706&#34;,&#34;#3F7624&#34;],&#34;size&#34;:{},&#34;colors&#34;:[&#34;#647933&#34;,&#34;#732429&#34;,&#34;#986516&#34;,&#34;#832128&#34;,&#34;#232023&#34;,&#34;#138233&#34;,&#34;#943E1F&#34;,&#34;#17AEAB&#34;,&#34;#0C8864&#34;,&#34;#499535&#34;,&#34;#384D39&#34;,&#34;#573F3B&#34;,&#34;#9F8008&#34;,&#34;#047579&#34;,&#34;#077C6D&#34;,&#34;#108DB0&#34;,&#34;#BA2E2C&#34;,&#34;#06667C&#34;,&#34;#0DD7B4&#34;,&#34;#86B20D&#34;,&#34;#8B8784&#34;,&#34;#5F780B&#34;,&#34;#766D2A&#34;,&#34;#C06012&#34;,&#34;#1860A9&#34;,&#34;#62512B&#34;,&#34;#B1A206&#34;,&#34;#545D2C&#34;,&#34;#37CA7A&#34;,&#34;#22587E&#34;,&#34;#3A9610&#34;,&#34;#55BC26&#34;,&#34;#66242C&#34;,&#34;#473037&#34;,&#34;#C34622&#34;,&#34;#038E51&#34;,&#34;#1EA43A&#34;,&#34;#C17C08&#34;,&#34;#4B8407&#34;,&#34;#10753B&#34;,&#34;#758F07&#34;,&#34;#15AA7C&#34;,&#34;#265F37&#34;,&#34;#7E1C32&#34;,&#34;#119846&#34;,&#34;#9C212B&#34;,&#34;#898609&#34;,&#34;#582531&#34;,&#34;#5E9706&#34;,&#34;#3F7624&#34;],&#34;alpha_stroke&#34;:1,&#34;sizes&#34;:[10,100],&#34;spans&#34;:[1,20],&#34;type&#34;:&#34;scatter3d&#34;}},&#34;layout&#34;:{&#34;margin&#34;:{&#34;b&#34;:40,&#34;l&#34;:60,&#34;t&#34;:25,&#34;r&#34;:10},&#34;scene&#34;:{&#34;xaxis&#34;:{&#34;title&#34;:&#34;L&#34;},&#34;yaxis&#34;:{&#34;title&#34;:&#34;a&#34;},&#34;zaxis&#34;:{&#34;title&#34;:&#34;b&#34;}},&#34;hovermode&#34;:&#34;closest&#34;,&#34;showlegend&#34;:false},&#34;source&#34;:&#34;A&#34;,&#34;config&#34;:{&#34;showSendToCloud&#34;:false},&#34;data&#34;:[{&#34;x&#34;:[47.6470370380395,26.9343668030093,47.1828825841296,29.6773078450699,12.7045820506114,47.424072153912,37.7095435680787,64.3966358719047,50.2170710701797,55.2008575013163,30.5639393862333,29.2352057210328,54.8739847444633,44.21651687503,46.4348311991777,54.3461739170174,42.2864967235475,39.4002815788575,77.246141494701,67.3417368584501,56.4821125357197,46.7293021620499,45.4986153446182,51.5290761538363,40.1338361320406,35.3775725076101,65.7951807953912,37.6049924843794,72.5005589738049,35.5332956130365,54.909869921715,68.0826258130497,24.7407170414244,22.5787090735333,47.2231676738661,51.6978881209399,58.9315019517576,57.9255190148564,49.6384118056201,42.7699221303017,55.5967406937468,61.8862757522115,35.7827664244431,28.3085165518734,55.1722752062099,34.8245048991748,54.4721552035387,22.5158972154844,56.5773369142028,44.269889046976],&#34;y&#34;:[-19.1560055874448,35.1558839259183,14.2720406280373,41.9759780318741,2.27151473468494,-46.9672270333645,34.3138626384862,-36.1794957895637,-40.2015036246707,-42.360763899665,-13.1006131883921,9.63830700679229,2.01930745644207,-25.3929355968667,-32.9400403387384,-18.7144718129058,55.1505786880039,-16.2512192026847,-52.1150378079515,-35.0058101398964,1.02962325971967,-23.1977287309345,-5.20162909915775,34.3707882925485,6.26556465863796,1.71232485126426,-8.39391101221517,-11.537025012239,-56.2902446947673,-4.37777177199427,-49.6422187683071,-55.1756294819106,30.2241914435395,11.7955865367038,48.1326705218909,-47.3050354036041,-56.1539990811367,19.1817983458343,-37.485801469206,-41.0176083687218,-25.7079300352572,-47.2926881095034,-28.8228745220873,42.6000075381491,-52.123231334113,50.0622436786647,-11.744290691161,24.877420489759,-38.5316644028869,-33.7940092938693],&#34;z&#34;:[35.0345104570875,15.8418904092597,48.9346846157969,20.9249840908074,-1.78570914036779,33.9657948063168,36.0165415746418,-9.12817187084792,10.7727716382048,42.0852089437363,9.12095630563548,6.53578709802711,58.7122851209248,-10.4896224844523,0.31534768082993,-27.1244338341843,35.7715089466191,-19.564988924393,5.09492563363152,66.8339063421687,1.77215759159408,49.418203672323,37.6199540518151,55.9747127260182,-45.4109435932669,24.7964325796627,67.9103022988535,26.7723537600718,28.8802186644586,-26.5501909597621,54.4569417630617,61.1975442753346,10.9134354860685,-0.242929238594548,46.7112900443923,23.6139098568036,43.9314187088593,62.7749914938315,51.9201408757226,24.0782770255091,57.8980119441862,13.286134167394,17.2635276892329,12.5309090043427,33.8323009989432,26.1273787908098,57.374791997851,4.05616250233049,58.1589172091652,37.9475390129431],&#34;mode&#34;:&#34;markers&#34;,&#34;type&#34;:&#34;scatter3d&#34;,&#34;marker&#34;:{&#34;color&#34;:[&#34;rgba(100,121,51,1)&#34;,&#34;rgba(115,36,41,1)&#34;,&#34;rgba(152,101,22,1)&#34;,&#34;rgba(131,33,40,1)&#34;,&#34;rgba(35,32,35,1)&#34;,&#34;rgba(19,130,51,1)&#34;,&#34;rgba(148,62,31,1)&#34;,&#34;rgba(23,174,171,1)&#34;,&#34;rgba(12,136,100,1)&#34;,&#34;rgba(73,149,53,1)&#34;,&#34;rgba(56,77,57,1)&#34;,&#34;rgba(87,63,59,1)&#34;,&#34;rgba(159,128,8,1)&#34;,&#34;rgba(4,117,121,1)&#34;,&#34;rgba(7,124,109,1)&#34;,&#34;rgba(16,141,176,1)&#34;,&#34;rgba(186,46,44,1)&#34;,&#34;rgba(6,102,124,1)&#34;,&#34;rgba(13,215,180,1)&#34;,&#34;rgba(134,178,13,1)&#34;,&#34;rgba(139,135,132,1)&#34;,&#34;rgba(95,120,11,1)&#34;,&#34;rgba(118,109,42,1)&#34;,&#34;rgba(192,96,18,1)&#34;,&#34;rgba(24,96,169,1)&#34;,&#34;rgba(98,81,43,1)&#34;,&#34;rgba(177,162,6,1)&#34;,&#34;rgba(84,93,44,1)&#34;,&#34;rgba(55,202,122,1)&#34;,&#34;rgba(34,88,126,1)&#34;,&#34;rgba(58,150,16,1)&#34;,&#34;rgba(85,188,38,1)&#34;,&#34;rgba(102,36,44,1)&#34;,&#34;rgba(71,48,55,1)&#34;,&#34;rgba(195,70,34,1)&#34;,&#34;rgba(3,142,81,1)&#34;,&#34;rgba(30,164,58,1)&#34;,&#34;rgba(193,124,8,1)&#34;,&#34;rgba(75,132,7,1)&#34;,&#34;rgba(16,117,59,1)&#34;,&#34;rgba(117,143,7,1)&#34;,&#34;rgba(21,170,124,1)&#34;,&#34;rgba(38,95,55,1)&#34;,&#34;rgba(126,28,50,1)&#34;,&#34;rgba(17,152,70,1)&#34;,&#34;rgba(156,33,43,1)&#34;,&#34;rgba(137,134,9,1)&#34;,&#34;rgba(88,37,49,1)&#34;,&#34;rgba(94,151,6,1)&#34;,&#34;rgba(63,118,36,1)&#34;],&#34;size&#34;:[55.8780487804878,100,19.8780487804878,68.609756097561,46.8780487804878,56.0975609756098,24.2682926829268,18.5609756097561,57.1951219512195,52.1463414634146,31.5121951219512,50.390243902439,39.6341463414634,60.2682926829268,56.7560975609756,10.6585365853659,48.4146341463415,61.3658536585366,13.5121951219512,21.4146341463415,17.2439024390244,54.5609756097561,50.1707317073171,34.8048780487805,10,33.2682926829268,18.1219512195122,53.2439024390244,11.7560975609756,28.4390243902439,74.3170731707317,24.4878048780488,83.3170731707317,67.9512195121951,42.4878048780488,70.3658536585366,56.5365853658537,26.9024390243902,74.9756097560976,40.9512195121951,59.609756097561,19.4390243902439,29.0975609756098,32.390243902439,75.4146341463415,60.7073170731707,51.0487804878049,49.7317073170732,55.219512195122,52.5853658536585],&#34;sizemode&#34;:&#34;area&#34;,&#34;line&#34;:{&#34;color&#34;:[&#34;rgba(100,121,51,1)&#34;,&#34;rgba(115,36,41,1)&#34;,&#34;rgba(152,101,22,1)&#34;,&#34;rgba(131,33,40,1)&#34;,&#34;rgba(35,32,35,1)&#34;,&#34;rgba(19,130,51,1)&#34;,&#34;rgba(148,62,31,1)&#34;,&#34;rgba(23,174,171,1)&#34;,&#34;rgba(12,136,100,1)&#34;,&#34;rgba(73,149,53,1)&#34;,&#34;rgba(56,77,57,1)&#34;,&#34;rgba(87,63,59,1)&#34;,&#34;rgba(159,128,8,1)&#34;,&#34;rgba(4,117,121,1)&#34;,&#34;rgba(7,124,109,1)&#34;,&#34;rgba(16,141,176,1)&#34;,&#34;rgba(186,46,44,1)&#34;,&#34;rgba(6,102,124,1)&#34;,&#34;rgba(13,215,180,1)&#34;,&#34;rgba(134,178,13,1)&#34;,&#34;rgba(139,135,132,1)&#34;,&#34;rgba(95,120,11,1)&#34;,&#34;rgba(118,109,42,1)&#34;,&#34;rgba(192,96,18,1)&#34;,&#34;rgba(24,96,169,1)&#34;,&#34;rgba(98,81,43,1)&#34;,&#34;rgba(177,162,6,1)&#34;,&#34;rgba(84,93,44,1)&#34;,&#34;rgba(55,202,122,1)&#34;,&#34;rgba(34,88,126,1)&#34;,&#34;rgba(58,150,16,1)&#34;,&#34;rgba(85,188,38,1)&#34;,&#34;rgba(102,36,44,1)&#34;,&#34;rgba(71,48,55,1)&#34;,&#34;rgba(195,70,34,1)&#34;,&#34;rgba(3,142,81,1)&#34;,&#34;rgba(30,164,58,1)&#34;,&#34;rgba(193,124,8,1)&#34;,&#34;rgba(75,132,7,1)&#34;,&#34;rgba(16,117,59,1)&#34;,&#34;rgba(117,143,7,1)&#34;,&#34;rgba(21,170,124,1)&#34;,&#34;rgba(38,95,55,1)&#34;,&#34;rgba(126,28,50,1)&#34;,&#34;rgba(17,152,70,1)&#34;,&#34;rgba(156,33,43,1)&#34;,&#34;rgba(137,134,9,1)&#34;,&#34;rgba(88,37,49,1)&#34;,&#34;rgba(94,151,6,1)&#34;,&#34;rgba(63,118,36,1)&#34;]}},&#34;textfont&#34;:{&#34;color&#34;:[&#34;rgba(100,121,51,1)&#34;,&#34;rgba(115,36,41,1)&#34;,&#34;rgba(152,101,22,1)&#34;,&#34;rgba(131,33,40,1)&#34;,&#34;rgba(35,32,35,1)&#34;,&#34;rgba(19,130,51,1)&#34;,&#34;rgba(148,62,31,1)&#34;,&#34;rgba(23,174,171,1)&#34;,&#34;rgba(12,136,100,1)&#34;,&#34;rgba(73,149,53,1)&#34;,&#34;rgba(56,77,57,1)&#34;,&#34;rgba(87,63,59,1)&#34;,&#34;rgba(159,128,8,1)&#34;,&#34;rgba(4,117,121,1)&#34;,&#34;rgba(7,124,109,1)&#34;,&#34;rgba(16,141,176,1)&#34;,&#34;rgba(186,46,44,1)&#34;,&#34;rgba(6,102,124,1)&#34;,&#34;rgba(13,215,180,1)&#34;,&#34;rgba(134,178,13,1)&#34;,&#34;rgba(139,135,132,1)&#34;,&#34;rgba(95,120,11,1)&#34;,&#34;rgba(118,109,42,1)&#34;,&#34;rgba(192,96,18,1)&#34;,&#34;rgba(24,96,169,1)&#34;,&#34;rgba(98,81,43,1)&#34;,&#34;rgba(177,162,6,1)&#34;,&#34;rgba(84,93,44,1)&#34;,&#34;rgba(55,202,122,1)&#34;,&#34;rgba(34,88,126,1)&#34;,&#34;rgba(58,150,16,1)&#34;,&#34;rgba(85,188,38,1)&#34;,&#34;rgba(102,36,44,1)&#34;,&#34;rgba(71,48,55,1)&#34;,&#34;rgba(195,70,34,1)&#34;,&#34;rgba(3,142,81,1)&#34;,&#34;rgba(30,164,58,1)&#34;,&#34;rgba(193,124,8,1)&#34;,&#34;rgba(75,132,7,1)&#34;,&#34;rgba(16,117,59,1)&#34;,&#34;rgba(117,143,7,1)&#34;,&#34;rgba(21,170,124,1)&#34;,&#34;rgba(38,95,55,1)&#34;,&#34;rgba(126,28,50,1)&#34;,&#34;rgba(17,152,70,1)&#34;,&#34;rgba(156,33,43,1)&#34;,&#34;rgba(137,134,9,1)&#34;,&#34;rgba(88,37,49,1)&#34;,&#34;rgba(94,151,6,1)&#34;,&#34;rgba(63,118,36,1)&#34;],&#34;size&#34;:[55.8780487804878,100,19.8780487804878,68.609756097561,46.8780487804878,56.0975609756098,24.2682926829268,18.5609756097561,57.1951219512195,52.1463414634146,31.5121951219512,50.390243902439,39.6341463414634,60.2682926829268,56.7560975609756,10.6585365853659,48.4146341463415,61.3658536585366,13.5121951219512,21.4146341463415,17.2439024390244,54.5609756097561,50.1707317073171,34.8048780487805,10,33.2682926829268,18.1219512195122,53.2439024390244,11.7560975609756,28.4390243902439,74.3170731707317,24.4878048780488,83.3170731707317,67.9512195121951,42.4878048780488,70.3658536585366,56.5365853658537,26.9024390243902,74.9756097560976,40.9512195121951,59.609756097561,19.4390243902439,29.0975609756098,32.390243902439,75.4146341463415,60.7073170731707,51.0487804878049,49.7317073170732,55.219512195122,52.5853658536585]},&#34;error_y&#34;:{&#34;width&#34;:[]},&#34;error_x&#34;:{&#34;width&#34;:[]},&#34;line&#34;:{&#34;color&#34;:[&#34;rgba(100,121,51,1)&#34;,&#34;rgba(115,36,41,1)&#34;,&#34;rgba(152,101,22,1)&#34;,&#34;rgba(131,33,40,1)&#34;,&#34;rgba(35,32,35,1)&#34;,&#34;rgba(19,130,51,1)&#34;,&#34;rgba(148,62,31,1)&#34;,&#34;rgba(23,174,171,1)&#34;,&#34;rgba(12,136,100,1)&#34;,&#34;rgba(73,149,53,1)&#34;,&#34;rgba(56,77,57,1)&#34;,&#34;rgba(87,63,59,1)&#34;,&#34;rgba(159,128,8,1)&#34;,&#34;rgba(4,117,121,1)&#34;,&#34;rgba(7,124,109,1)&#34;,&#34;rgba(16,141,176,1)&#34;,&#34;rgba(186,46,44,1)&#34;,&#34;rgba(6,102,124,1)&#34;,&#34;rgba(13,215,180,1)&#34;,&#34;rgba(134,178,13,1)&#34;,&#34;rgba(139,135,132,1)&#34;,&#34;rgba(95,120,11,1)&#34;,&#34;rgba(118,109,42,1)&#34;,&#34;rgba(192,96,18,1)&#34;,&#34;rgba(24,96,169,1)&#34;,&#34;rgba(98,81,43,1)&#34;,&#34;rgba(177,162,6,1)&#34;,&#34;rgba(84,93,44,1)&#34;,&#34;rgba(55,202,122,1)&#34;,&#34;rgba(34,88,126,1)&#34;,&#34;rgba(58,150,16,1)&#34;,&#34;rgba(85,188,38,1)&#34;,&#34;rgba(102,36,44,1)&#34;,&#34;rgba(71,48,55,1)&#34;,&#34;rgba(195,70,34,1)&#34;,&#34;rgba(3,142,81,1)&#34;,&#34;rgba(30,164,58,1)&#34;,&#34;rgba(193,124,8,1)&#34;,&#34;rgba(75,132,7,1)&#34;,&#34;rgba(16,117,59,1)&#34;,&#34;rgba(117,143,7,1)&#34;,&#34;rgba(21,170,124,1)&#34;,&#34;rgba(38,95,55,1)&#34;,&#34;rgba(126,28,50,1)&#34;,&#34;rgba(17,152,70,1)&#34;,&#34;rgba(156,33,43,1)&#34;,&#34;rgba(137,134,9,1)&#34;,&#34;rgba(88,37,49,1)&#34;,&#34;rgba(94,151,6,1)&#34;,&#34;rgba(63,118,36,1)&#34;]},&#34;frame&#34;:null}],&#34;highlight&#34;:{&#34;on&#34;:&#34;plotly_click&#34;,&#34;persistent&#34;:false,&#34;dynamic&#34;:false,&#34;selectize&#34;:false,&#34;opacityDim&#34;:0.2,&#34;selected&#34;:{&#34;opacity&#34;:1},&#34;debounce&#34;:0},&#34;shinyEvents&#34;:[&#34;plotly_hover&#34;,&#34;plotly_click&#34;,&#34;plotly_selected&#34;,&#34;plotly_relayout&#34;,&#34;plotly_brushed&#34;,&#34;plotly_brushing&#34;,&#34;plotly_clickannotation&#34;,&#34;plotly_doubleclick&#34;,&#34;plotly_deselect&#34;,&#34;plotly_afterplot&#34;,&#34;plotly_sunburstclick&#34;],&#34;base_url&#34;:&#34;https://plot.ly&#34;},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
</description>
    </item>
    
  </channel>
</rss>
